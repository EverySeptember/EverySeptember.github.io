<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>这里是lu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="这里是lu">
<meta property="og:url" content="http://everyseptember.github.io/page/3/index.html">
<meta property="og:site_name" content="这里是lu">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="lu">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="这里是lu" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">这里是lu</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://everyseptember.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-数据结构-线性表-散列表" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/04/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%BA%BF%E6%80%A7%E8%A1%A8-%E6%95%A3%E5%88%97%E8%A1%A8/" class="article-date">
  <time class="dt-published" datetime="2019-04-03T01:56:01.000Z" itemprop="datePublished">2019-04-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/04/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%BA%BF%E6%80%A7%E8%A1%A8-%E6%95%A3%E5%88%97%E8%A1%A8/">数据结构-线性表-散列表</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="散列表"><a href="#散列表" class="headerlink" title="散列表"></a>散列表</h1><p>散列表的英文是Hash Table，即日常所说的哈希表或者Hash表。</p>
<p>散列表用的是数组按照下标随机访问数据的特性，所以散列表其实就是数组的一种扩展，由数组演化而来。</p>
<p>散列表的键（Key）经过散列函数（Hash函数）计算得到散列值（Hash值）作为数组下标，形成散列表。</p>
<h2 id="哈希冲突"><a href="#哈希冲突" class="headerlink" title="哈希冲突"></a>哈希冲突</h2><p>解决哈希冲突两种方法</p>
<h3 id="寻址法（open-addressing）"><a href="#寻址法（open-addressing）" class="headerlink" title="寻址法（open addressing）"></a>寻址法（open addressing）</h3><p>出现一个哈希冲突，便重新寻找一个空闲位置将其插入。</p>
<h4 id="线性探测"><a href="#线性探测" class="headerlink" title="线性探测"></a>线性探测</h4><ul>
<li>插入：从当前位置一次向后查找，若之后均没有则重新从头查找；</li>
<li>查找：过程类似于插入，先与下标为目标哈希值的元素对照，如果相同则返回，如果不同则依次向后查找，如果找到有空闲位置则说明不存在；</li>
<li>删除：不能简单讲位置置空，否则会影响查找算法，应将删除的位置标记为deleted，查找到该位置时不是退出而是继续向下探测</li>
</ul>
<p>该方法插入的数据越多，发生冲突的可能性越大，空闲位置会越少，探测时间会越久。极限情况下会达到O(n)。</p>
<h4 id="二次探测"><a href="#二次探测" class="headerlink" title="二次探测"></a>二次探测</h4><p>与线性探测原理类似，其步进长度不是1，而是步长的平方。</p>
<h4 id="双重散列"><a href="#双重散列" class="headerlink" title="双重散列"></a>双重散列</h4><p>该方法是在遇到哈希冲突的时候再次进行哈希，多次哈希直到找到空闲的位置。</p>
<p>无论是上述那种方法，空闲位置不多的时候，哈希冲突的概率都会大大提高。为了尽可能保证散列表的操作效率，一般情况下会尽可能保证散列表中有一定比例的空闲槽位。使用<strong>装载因子（load factor）</strong>来表示空位的多少。</p>
<p>装载因子的计算公式：<code>装入表中的元素个数 / 散列表的长度</code>。</p>
<p>装在因子越大，说明空闲位置越少，冲突越多，性能会下降。</p>
<h4 id="寻址法的优缺点"><a href="#寻址法的优缺点" class="headerlink" title="寻址法的优缺点"></a>寻址法的优缺点</h4><ul>
<li>优点<ul>
<li>所有数据都存在数组中，可有效利用CPU缓存加快查询速度    </li>
<li>序列化简单</li>
</ul>
</li>
<li>缺点<ul>
<li>删除数据比较麻烦</li>
<li>解决冲突代价更高，比链表法更浪费空间</li>
</ul>
</li>
</ul>
<h4 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h4><p>数据量较小、装载因子较小的时候适合适用寻址法。</p>
<h3 id="链表法（chaining）"><a href="#链表法（chaining）" class="headerlink" title="链表法（chaining）"></a>链表法（chaining）</h3><p>链表法每个数组元素都是一个桶，桶中放置一个链表，哈希值相同的元素插入到相应的链表上。</p>
<ul>
<li>优点<ul>
<li>链表法对内存的使用率比寻址法更高</li>
<li>对大装载因子的容忍度更高，开放寻址法只能适用于装载因子小于1的情况；链表法可以承受装载因子大于1的情况，其查询效率会有下降，但仍优于顺序查找</li>
</ul>
</li>
<li>缺点<ul>
<li>链表需要存储指针，其内存消耗要更高（当存储对象远大于指针大小时可以忽略）</li>
</ul>
</li>
</ul>
<h4 id="适用场景-1"><a href="#适用场景-1" class="headerlink" title="适用场景"></a>适用场景</h4><p>链表法散列表比较适合存储大对象、大数据量，而且它更加灵活，支持更多优化策略。</p>
<h2 id="设计散列函数"><a href="#设计散列函数" class="headerlink" title="设计散列函数"></a>设计散列函数</h2><p>原则</p>
<ul>
<li>设计不能太复杂，否则会影响性能</li>
<li>生成的值要尽可能随机并且均匀分布。</li>
</ul>
<h2 id="散列表扩容"><a href="#散列表扩容" class="headerlink" title="散列表扩容"></a>散列表扩容</h2><p>装载因子过大时需要启动动态扩容，在对数组进行扩容的同时需要重新计算哈希值。</p>
<p>插入一个数据最好情况是O(1)，最坏情况需要扩容，是O(n)，均摊计算是O(1)。</p>
<p>在对元素进行删除后装载因子会减小，此时可以进行动态缩容。</p>
<h3 id="避免低效扩容"><a href="#避免低效扩容" class="headerlink" title="避免低效扩容"></a>避免低效扩容</h3><p>在扩容时可以选择不进行“一次性扩容”，可在初始化后在每次新插入数据时再从旧数据中选择一条插入到新数组中，多次O(1)复杂度的扩容，可有效提高效率。</p>
<h2 id="Java的HashMap分析"><a href="#Java的HashMap分析" class="headerlink" title="Java的HashMap分析"></a>Java的HashMap分析</h2><ul>
<li>初始大小：默认16，如果初始化时目标明确，可以手动修改，这样能减少扩容次数，提高效率。</li>
<li>装载因子：默认0.75，超过0.75便会扩容为原来的两倍。</li>
<li>哈希冲突：JDK1.8中引入了红黑树，在链表长度过长（默认8）时，便会将链表树化；在红黑树节点过小（默认为6）的时候，红黑树又将变回链表。</li>
</ul>
<h2 id="工业级的散列表"><a href="#工业级的散列表" class="headerlink" title="工业级的散列表"></a>工业级的散列表</h2><h3 id="应具有的特性"><a href="#应具有的特性" class="headerlink" title="应具有的特性"></a>应具有的特性</h3><ul>
<li>支持快速的插入、查询、删除操作</li>
<li>内存占用合理，不能浪费过多的空间</li>
<li>性能稳定，极端情况下的性能也不能退化到无法接受的情况</li>
</ul>
<h3 id="设计原则"><a href="#设计原则" class="headerlink" title="设计原则"></a>设计原则</h3><ul>
<li>设计一个合适的散列函数</li>
<li>定义装载因子阈值，并且合理设计动态扩容策略</li>
<li>选择合适的解决哈希冲突的方法</li>
</ul>
<h2 id="散列表与链表结合使用"><a href="#散列表与链表结合使用" class="headerlink" title="散列表与链表结合使用"></a>散列表与链表结合使用</h2><h3 id="LRU算法"><a href="#LRU算法" class="headerlink" title="LRU算法"></a>LRU算法</h3><p><img src="https://static001.geekbang.org/resource/image/ea/6e/eaefd5f4028cc7d4cfbb56b24ce8ae6e.jpg" alt="LRU算法"></p>
<p>在散列表中使用双向链表作为存储介质，prev与next做双向链表寻址使用，hnext则将链表的节点添加到散列表中去，实现双向链表与散列表的结合。</p>
<ul>
<li>查找数据：根据散列表进行复杂度为O(1)的寻找，找到之后将该数据移动到链表的尾部</li>
<li>删除数据：首先找到该数据位置，其后将该数据从散列表和链表上分别删除</li>
<li>添加数据：首先在散列表中寻找该数据，如果找不到则将该数据添加到链表的尾端；如果此时缓存已满，则需要将首端数据清除，然后再将数据添加到链表的尾部</li>
</ul>
<h3 id="Redis有序集合"><a href="#Redis有序集合" class="headerlink" title="Redis有序集合"></a>Redis有序集合</h3><p>跳表与散列表的结合，在跳表节点中添加散列表的地址属性，使相同的节点指向的散列表节点总是相同的。</p>
<h3 id="Java-LinkedHashMap"><a href="#Java-LinkedHashMap" class="headerlink" title="Java LinkedHashMap"></a>Java LinkedHashMap</h3><p>使用双向链表与散列表同时使用，原理与LRU缓存相同。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://everyseptember.github.io/2019/04/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%BA%BF%E6%80%A7%E8%A1%A8-%E6%95%A3%E5%88%97%E8%A1%A8/" data-id="ckp7osn5b001c0es56qjn4iig" data-title="数据结构-线性表-散列表" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%A3%E5%88%97%E8%A1%A8/" rel="tag">散列表</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Java核心技术-进阶" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/03/30/Java%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E8%BF%9B%E9%98%B6/" class="article-date">
  <time class="dt-published" datetime="2019-03-30T12:45:11.000Z" itemprop="datePublished">2019-03-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/03/30/Java%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E8%BF%9B%E9%98%B6/">Java核心技术-进阶</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h3><ul>
<li><strong>创建型模式</strong>：是对对象创建过程的各种问题和解决方法的总结，包括工厂模式（Factory、Abstract Factory）、单例模式（Singleton）、构造器模式（Builder）、原型模式（ProtoType）。</li>
<li><strong>结构型模式</strong>：是针对软件设计的总结，关注于类、对象继承、组合方式的实践经验。常见的结构型模式，包括桥接模式（Bridge）、适配器模式（Adapter）、装饰器模式（Decorator）、代理模式（Proxy）、组合模式（Composite）、外观模式（Facade）、享元模式（Flyweight）等。</li>
<li><strong>行为模式</strong>：是从类或对象之间交互、职责划分等角度总结的模式。比较常见的行为型模式有策略模式（Strategy）、解释器模式（Interpreter）、命令模式（Commond）、观察者模式（Observer）、迭代器模式（Iterator）、模板方法模式（Template Method）、访问者模式（Visitor）。</li>
</ul>
<h3 id="synchronized和ReentrantLock"><a href="#synchronized和ReentrantLock" class="headerlink" title="synchronized和ReentrantLock"></a>synchronized和ReentrantLock</h3><ul>
<li>synchronized是Java内建的同步机制，提供了互斥的语义和可见性，当一个线程已经获取当前锁时，其他视图获取的线程只能等待或者阻塞在那里。本质上synchronized方法等同于把方法全部语句用synchronized块包起来。</li>
<li>ReentrantLock，通常翻译为再入锁，是Java5提供的锁实现，它的语义和synchronized基本相同。再入锁通过代码直接调用lock()方法获取，代码书写也更加灵活。ReentrantLock也提供了很多方法，可以做到许多synchronized无法做到的细节控制。ReentrantLock需要在使用完成后明确调用unlock()方法释放，不然就会一直持有该锁。</li>
</ul>
<h5 id="线程安全"><a href="#线程安全" class="headerlink" title="线程安全"></a>线程安全</h5><p>线程安全是一个多线程环境下正确性的概念，也就是保证多线程环境下<strong>共享的、可修改</strong>的状态的正确性。</p>
<p>线程安全需要保证几个基本特性：</p>
<ul>
<li>原子性：相关操作中不会中途被其他线程干扰，一般通过同步机制实现。</li>
<li>可见性：一个线程修改了某个共享变量，其状态能够立即被其他线程知晓，通常被解释为将线程本地状态反映到内存上，volatile就是负责保证可见性的。</li>
<li>有序性：保证线程内串行语义，避免指令重排等。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://everyseptember.github.io/2019/03/30/Java%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E8%BF%9B%E9%98%B6/" data-id="ckp7osn4f00040es50ci5918q" data-title="Java核心技术-进阶" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/" rel="tag">Java核心技术</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-SSM2-Spring" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/03/19/SSM2-Spring/" class="article-date">
  <time class="dt-published" datetime="2019-03-19T11:24:27.000Z" itemprop="datePublished">2019-03-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/03/19/SSM2-Spring/">SSM开发实战2-Spring</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h3><h5 id="IOC控制反转"><a href="#IOC控制反转" class="headerlink" title="IOC控制反转"></a>IOC控制反转</h5><ul>
<li>全称Inverse Of Control，设计一种设计理念。</li>
<li>核心是由代理人创建与管理对象，消费者通过代理人获取对象。</li>
<li>目的是降低程序之间的直接耦合。</li>
</ul>
<h5 id="DI依赖注入"><a href="#DI依赖注入" class="headerlink" title="DI依赖注入"></a>DI依赖注入</h5><ul>
<li>IOC是设计标准</li>
<li>DI(Dependency Injection)是具体实现</li>
<li>在Java中DI是利用反射实现的</li>
</ul>
<h5 id="Spring-Framework"><a href="#Spring-Framework" class="headerlink" title="Spring Framework"></a>Spring Framework</h5><ul>
<li>Spring框架是IOC理念的具体实现</li>
<li>Spring核心技术是反射</li>
<li>设计模式主要使用工厂与代理模式实现</li>
</ul>
<h4 id="1-Spring创建（xml方式）"><a href="#1-Spring创建（xml方式）" class="headerlink" title="1.Spring创建（xml方式）"></a>1.Spring创建（xml方式）</h4><h5 id="1-引入JAR包"><a href="#1-引入JAR包" class="headerlink" title="1.引入JAR包"></a>1.引入JAR包</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-创建配置文件"><a href="#2-创建配置文件" class="headerlink" title="2.创建配置文件"></a>2.创建配置文件</h5><p>在src/main/resources下创建applicationContext.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="3-创建入口类"><a href="#3-创建入口类" class="headerlink" title="3.创建入口类"></a>3.创建入口类</h5><p>在入口类中添加main方法，在项目启动时，便会根据加载内容对IOC容器进行初始化</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 加载核心配置文件</span></span><br><span class="line">    ApplicationContext atx = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;classpath:applicationContext.xml&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4-创建类"><a href="#4-创建类" class="headerlink" title="4.创建类"></a>4.创建类</h5><p>在类中创建要加载的类作为私有属性，并且创建对应的set方法；spring IOC容器初始化时会使用该set方法注入要加载的类。</p>
<h5 id="5-在核心配置文件中配置要加载的类"><a href="#5-在核心配置文件中配置要加载的类" class="headerlink" title="5.在核心配置文件中配置要加载的类"></a>5.在核心配置文件中配置要加载的类</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;empDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.lu.spring.dao.EmpDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;empService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.lu.spring.service.EmpService&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置类中私有属性与bean的映射关系--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--name是类中的属性，ref是指向的bean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;empDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-Spring创建（注解方式）"><a href="#2-Spring创建（注解方式）" class="headerlink" title="2.Spring创建（注解方式）"></a>2.Spring创建（注解方式）</h4><h5 id="Spring-IOC注解"><a href="#Spring-IOC注解" class="headerlink" title="Spring IOC注解"></a>Spring IOC注解</h5><ul>
<li>@Responsitory-持久层类</li>
<li>@Service-业务逻辑层</li>
<li>@Controller-控制器类</li>
<li>@Component-组件类</li>
<li>@Resource-智能加载</li>
<li>@Autowired-按类型加载</li>
</ul>
<h5 id="1-引入依赖"><a href="#1-引入依赖" class="headerlink" title="1.引入依赖"></a>1.引入依赖</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-创建配置文件-1"><a href="#2-创建配置文件-1" class="headerlink" title="2.创建配置文件"></a>2.创建配置文件</h5><p>在src/main/resources下创建applicationContext.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        扫描目标包下的所有类，并将拥有以下注释的类进行加载</span></span><br><span class="line"><span class="comment">        @Reponsitory - 持久层类</span></span><br><span class="line"><span class="comment">        @Service - 业务逻辑</span></span><br><span class="line"><span class="comment">        @Controller - 控制器</span></span><br><span class="line"><span class="comment">        @Component - 组件</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.lu.spring&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="3-创建类，并将类使用对应的注解"><a href="#3-创建类，并将类使用对应的注解" class="headerlink" title="3.创建类，并将类使用对应的注解"></a>3.创建类，并将类使用对应的注解</h5><p>使用注解创建的bean，id默认为首字母小写的类名；在注解后也可以对bean id进行命名，如<code>@Responsitory(&quot;eDao&quot;)</code></p>
<h5 id="4-注入对象"><a href="#4-注入对象" class="headerlink" title="4.注入对象"></a>4.注入对象</h5><h6 id="Resource"><a href="#Resource" class="headerlink" title="@Resource"></a>@Resource</h6><p>在类中创建对象，无须创建get、set方法，使用@Resource注解注入。</p>
<ol>
<li>默认Resource注解使用属性名作为bean id进行注入</li>
<li>指定name属性，可以按照name进行加载，如<code>@Resource(name = &quot;eDao&quot;)</code></li>
<li>（不推荐）未指明name，同时也不存在属性名相同的bean时，则自动按照类型进行匹配</li>
</ol>
<h6 id="Autowired"><a href="#Autowired" class="headerlink" title="@Autowired"></a>@Autowired</h6><p>只能按照类型进行注入，已不常用</p>
<h4 id="AOP面向切面编程"><a href="#AOP面向切面编程" class="headerlink" title="AOP面向切面编程"></a>AOP面向切面编程</h4><p>在不修改源代码的情况下为程序进行扩展的计数</p>
<h5 id="1-引入依赖-1"><a href="#1-引入依赖-1" class="headerlink" title="1.引入依赖"></a>1.引入依赖</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-修改配置文件"><a href="#2-修改配置文件" class="headerlink" title="2.修改配置文件"></a>2.修改配置文件</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;</span><br><span class="line">        http://www.springframework.org/schema/beans</span><br><span class="line">        http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">        http://www.springframework.org/schema/context</span><br><span class="line">        http://www.springframework.org/schema/context/spring-context.xsd</span><br><span class="line">        http://www.springframework.org/schema/aop</span><br><span class="line">        http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;context:component-scan base-package=&quot;com.lu.spring&quot;&gt;&lt;/context:component-scan&gt;</span><br><span class="line">    &lt;!--启用AOP注解功能--&gt;</span><br><span class="line">    &lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<h5 id="3-创建切面类"><a href="#3-创建切面类" class="headerlink" title="3.创建切面类"></a>3.创建切面类</h5><p>切面类需要@Component和@Aspect注解</p>
<p>最强力的注解：@Around注解，使用在方法上，环绕通知</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lu.spring.aspect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Around;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnhanceAspect</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 环绕通知</span></span><br><span class="line"><span class="comment">     * Around注解：应用在当前工程的所有Service类的所有方法中</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pjp</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Around(&quot;execution(* com.lu..*Service.*(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">doAround</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        <span class="comment">// 前置通知</span></span><br><span class="line">        System.out.println(pjp.getTarget().getClass().getSimpleName() + <span class="string">&quot;.&quot;</span> + pjp.getSignature().getName());</span><br><span class="line">        <span class="comment">// 执行目标方法</span></span><br><span class="line">        Object ret = pjp.proceed();</span><br><span class="line">        <span class="comment">// 后置通知</span></span><br><span class="line">        System.out.println(pjp.getTarget().getClass().getSimpleName() + <span class="string">&quot;.&quot;</span> + pjp.getSignature().getName() + <span class="string">&quot;执行完成&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://everyseptember.github.io/2019/03/19/SSM2-Spring/" data-id="ckp7osn4h00080es55wry9vs9" data-title="SSM开发实战2-Spring" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSM/" rel="tag">SSM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A1%86%E6%9E%B6/" rel="tag">框架</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-SSM3-Spring MVC" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/03/19/SSM3-Spring%20MVC/" class="article-date">
  <time class="dt-published" datetime="2019-03-19T11:24:27.000Z" itemprop="datePublished">2019-03-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/03/19/SSM3-Spring%20MVC/">SSM开发实战3-Spring MVC</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Spring-MVC"><a href="#Spring-MVC" class="headerlink" title="Spring MVC"></a>Spring MVC</h3><h5 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h5><ul>
<li><strong>M</strong>odel，模型</li>
<li><strong>Vi</strong>ew，视图</li>
<li><strong>C</strong>ontroller，控制器</li>
</ul>
<h5 id="Spring-MVC-1"><a href="#Spring-MVC-1" class="headerlink" title="Spring MVC"></a>Spring MVC</h5><ul>
<li>Spring体系的轻量级Web MVC框架</li>
<li>核心是Controller控制器，职责是处理请求，产生响应</li>
<li>基于IOC容器运行，所有对象被IOC管理</li>
</ul>
<h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><h5 id="1-引入依赖"><a href="#1-引入依赖" class="headerlink" title="1.引入依赖"></a>1.引入依赖</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-配置web-xml"><a href="#2-配置web-xml" class="headerlink" title="2.配置web.xml"></a>2.配置web.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://java.sun.com/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_1.xsd&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">version</span>=<span class="string">&quot;3.1&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Tomcat启动的时候自动初始化名为springmvc的IOC容器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--上下文配置--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>0<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--所有的请求都绑定servlet--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="3-定义applicationContext-xml"><a href="#3-定义applicationContext-xml" class="headerlink" title="3.定义applicationContext.xml"></a>3.定义applicationContext.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/mvc/spring-mvc.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="string"><span class="tag">            http://www.springframework.org/schema/tx/spring-tx.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--启用对目标的注解扫描--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.lu&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--使用注解模式启用Spring MVC--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--将图片、JS、CSS等静态资源排除在外--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Spring-URL-Mapping"><a href="#Spring-URL-Mapping" class="headerlink" title="Spring URL Mapping"></a>Spring URL Mapping</h4><p>注解形式</p>
<ul>
<li>RequestMapping，通用绑定</li>
<li>PostMapping，Post请求绑定</li>
<li>GetMapping，Get请求绑定</li>
</ul>
<h4 id="Controller接收请求数据"><a href="#Controller接收请求数据" class="headerlink" title="Controller接收请求数据"></a>Controller接收请求数据</h4><ul>
<li><p>直接使用Controller方法参数接收</p>
</li>
<li><p>使用Java Bean接收数据</p>
<ul>
<li>日期格式的字段需要使用<code>@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</code>注解来描述日期格式</li>
</ul>
</li>
<li><p>使用路径变量接收数据</p>
<ul>
<li>在Mapping接收地址中使用大括号接收路径变量</li>
<li>在方法参数使用<code>@PathVariable(&quot;路径变量名&quot;)</code>注解标注并传值给注解的形参</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/hi/&#123;name&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">hi</span><span class="params">(<span class="meta">@PathVariable(&quot;name&quot;)</span>String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hi &quot;</span> + name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="中文乱码的配置解决"><a href="#中文乱码的配置解决" class="headerlink" title="中文乱码的配置解决"></a>中文乱码的配置解决</h4><ul>
<li><p>Get请求乱码：在Tomcat server.xml的Connector标签中添加属性URIEncoding</p>
<pre><code>&lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;
           connectionTimeout=&quot;20000&quot;
           redirectPort=&quot;8443&quot; 
           URIEcoding=&quot;UTF-8&quot;/&gt;
</code></pre>
</li>
<li><p>Post请求乱码：在web.xml中配置添加过滤器CharacterEncodingFilter</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--过滤器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--springframework自带的编码过滤器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--设置目标编码--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--设置过滤器映射--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>Response响应乱码：配置applicationContext.xml中spring mvc</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--使用注解模式启用Spring MVC--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;supportedMediaTypes&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span>text/html;charset=utf-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="响应的处理方式"><a href="#响应的处理方式" class="headerlink" title="响应的处理方式"></a>响应的处理方式</h4><ul>
<li><p>@ResponseBody：产生相应文本</p>
<ul>
<li>SpringMVC支持对象序列化，需要引入相应的JAR包实现自动序列化</li>
<li>以Jackson为例</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>ModelAndView对象：套用模板引擎渲染输出</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">findByUser</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">    User user = userService.findByUserName(username);</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView(<span class="string">&quot;/info.jsp&quot;</span>);</span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;u&quot;</span>, user);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://everyseptember.github.io/2019/03/19/SSM3-Spring%20MVC/" data-id="ckp7osn4i00090es5cbc0940e" data-title="SSM开发实战3-Spring MVC" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSM/" rel="tag">SSM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-MVC/" rel="tag">Spring MVC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A1%86%E6%9E%B6/" rel="tag">框架</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-SSM4-Freemarker" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/03/19/SSM4-Freemarker/" class="article-date">
  <time class="dt-published" datetime="2019-03-19T11:24:27.000Z" itemprop="datePublished">2019-03-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/03/19/SSM4-Freemarker/">SSM开发实战4-Freemarker</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Freemarker"><a href="#Freemarker" class="headerlink" title="Freemarker"></a>Freemarker</h3><h4 id="模板引擎"><a href="#模板引擎" class="headerlink" title="模板引擎"></a>模板引擎</h4><ul>
<li>JSP</li>
<li>Freemarker</li>
<li>Beetl</li>
<li>Thymeleaf</li>
</ul>
<h4 id="Freemarker-1"><a href="#Freemarker-1" class="headerlink" title="Freemarker"></a>Freemarker</h4><ul>
<li>免费开源的模板引擎</li>
<li>Freemarker脚本为FTL（<strong>F</strong>reemarker <strong>T</strong>emplate <strong>L</strong>anguage）</li>
<li>提供了大量内建函数简化开发</li>
</ul>
<h4 id="与Spring-MVC集成"><a href="#与Spring-MVC集成" class="headerlink" title="与Spring MVC集成"></a>与Spring MVC集成</h4><ol>
<li><h5 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.freemarker<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>freemarker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.28<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context-support<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><h5 id="修改applicationContext-xml"><a href="#修改applicationContext-xml" class="headerlink" title="修改applicationContext.xml"></a>修改applicationContext.xml</h5><p>添加如下内容</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置Freemarker--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;freemarkerConfig&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--定义Freemarker文件放置目录--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateLoaderPath&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/ftl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--定义SpringMVC的视图解析器指向Freemarker--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;ViewResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;contentType&quot;</span> <span class="attr">value</span>=<span class="string">&quot;text/html; charset=UTF-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--设置后缀，使路径跳转自动添加.ftl后缀--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.ftl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><h5 id="在ftl目录中新建ftl文件"><a href="#在ftl目录中新建ftl文件" class="headerlink" title="在ftl目录中新建ftl文件"></a>在ftl目录中新建ftl文件</h5></li>
</ol>
<h4 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h4><ul>
<li><h5 id="取值"><a href="#取值" class="headerlink" title="取值"></a>取值</h5><ul>
<li>${属性名}</li>
<li>${属性名!默认值}</li>
<li>${属性名?string(‘’)}-格式化输出</li>
</ul>
</li>
<li><h5 id="if分支判断"><a href="#if分支判断" class="headerlink" title="if分支判断"></a>if分支判断</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--??表示不为空--&gt;</span><br><span class="line">&lt;#if u??&gt;</span><br><span class="line">&lt;#if (u.salary &lt; 10000)&gt;</span><br><span class="line">    past</span><br><span class="line">&lt;#elseif (u.salary &lt; 15000)&gt;</span><br><span class="line">    now</span><br><span class="line">&lt;#else&gt;</span><br><span class="line">    future</span><br><span class="line">&lt;/#if&gt;</span><br><span class="line">&lt;/#if&gt;</span><br></pre></td></tr></table></figure></li>
<li><h5 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;#list users as user&gt;</span><br><span class="line">    &lt;li&gt;$&#123;user_index&#125;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;$&#123;user.name&#125;&lt;/li&gt;</span><br><span class="line">&lt;/#list&gt;</span><br></pre></td></tr></table></figure></li>
<li><h5 id="内建函数"><a href="#内建函数" class="headerlink" title="内建函数"></a>内建函数</h5><p>使用方法：参数?内建函数名称</p>
<p>常用内建函数：</p>
<table>
<thead>
<tr>
<th>函数名</th>
<th>说明</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td>lower_case/upper_case</td>
<td>大小写转换</td>
<td>“abc”?upper_case</td>
</tr>
<tr>
<td>cap_firset</td>
<td>首字母大写</td>
<td>“lu”?cap_firset</td>
</tr>
<tr>
<td>index_of</td>
<td>查找字符索引</td>
<td>“abc”?index_of(“b”)</td>
</tr>
<tr>
<td>length</td>
<td>返回字符串长度</td>
<td>“abc”?length</td>
</tr>
<tr>
<td>round/floor/ceiling</td>
<td>四舍五入/下取整/上取整</td>
<td>pi?floor</td>
</tr>
<tr>
<td>size</td>
<td>得到集合元素总数</td>
<td>users?size</td>
</tr>
<tr>
<td>fist/last</td>
<td>获得第一个/最后一个元素</td>
<td>users?first</td>
</tr>
<tr>
<td>sort_by</td>
<td>按某个属性对集合排序</td>
<td>list?sort_by(“salary”)</td>
</tr>
</tbody></table>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://everyseptember.github.io/2019/03/19/SSM4-Freemarker/" data-id="ckp7osn4j000b0es5akgc6wbr" data-title="SSM开发实战4-Freemarker" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Freemarker/" rel="tag">Freemarker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSM/" rel="tag">SSM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A1%86%E6%9E%B6/" rel="tag">框架</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-SSM5-SSM" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/03/19/SSM5-SSM/" class="article-date">
  <time class="dt-published" datetime="2019-03-19T11:24:27.000Z" itemprop="datePublished">2019-03-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/03/19/SSM5-SSM/">SSM开发实战5-SSM</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="SSM整合"><a href="#SSM整合" class="headerlink" title="SSM整合"></a>SSM整合</h3><h4 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h4><ol>
<li><h5 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatis与spring整合插件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><h5 id="修改spring核心配置文件applicationContext-xml"><a href="#修改spring核心配置文件applicationContext-xml" class="headerlink" title="修改spring核心配置文件applicationContext.xml"></a>修改spring核心配置文件applicationContext.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatis整合配置--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--1.配置数据源--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;datasource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://39.104.126.40:3306/next-shop?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=utf-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;soulOperation@0!8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--2.配置SessionFactory--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--创建数据库连接--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;datasource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mybatis配置文件地址--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--定义扫描mapper配置文件地址--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mappers/*.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--3.mybatis扫描mapper接口配置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.lu.ssm&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><h5 id="创建mybatis核心配置文件"><a href="#创建mybatis核心配置文件" class="headerlink" title="创建mybatis核心配置文件"></a>创建mybatis核心配置文件</h5><p>mybatis-config中关于数据库连接的部分已经交由applicationContext.xml处理</p>
</li>
<li><h5 id="创建mapper包下的mapper接口"><a href="#创建mapper包下的mapper接口" class="headerlink" title="创建mapper包下的mapper接口"></a>创建mapper包下的mapper接口</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AreaMapper</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Area&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><h5 id="创建对应的mappers下的mapper-xml配置文件"><a href="#创建对应的mappers下的mapper-xml配置文件" class="headerlink" title="创建对应的mappers下的mapper.xml配置文件"></a>创建对应的mappers下的mapper.xml配置文件</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--namespace一定要指向mapper接口--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.lu.ssm.mapper.AreaMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ID要与mapper接口中的方法名一致--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.lu.ssm.entity.Area&quot;</span>&gt;</span></span><br><span class="line">        SELECT * FROM bas_area</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="MyBatis-Plus"><a href="#MyBatis-Plus" class="headerlink" title="MyBatis Plus"></a>MyBatis Plus</h3><h4 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h4><ul>
<li>无侵入-不修改mybatis代码</li>
<li>损耗小</li>
<li>强大的CURD</li>
<li>支持多种数据库</li>
<li>内置分页功能</li>
<li>内置主键生成策略</li>
<li>*默认在ssm环境执行</li>
</ul>
<h4 id="步骤-1"><a href="#步骤-1" class="headerlink" title="步骤"></a>步骤</h4><ol>
<li><h5 id="引入依赖-1"><a href="#引入依赖-1" class="headerlink" title="引入依赖"></a>引入依赖</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><h5 id="修改applicationContext-xml"><a href="#修改applicationContext-xml" class="headerlink" title="修改applicationContext.xml"></a>修改applicationContext.xml</h5><p>修改关于sqlSessionFactory的创建类，无须做其他任何更改</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">	...</span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><h5 id="修改实体类"><a href="#修改实体类" class="headerlink" title="修改实体类"></a>修改实体类</h5><ul>
<li>使用@TableName()注解类，使该类与表关联</li>
<li>使用@TableId(type = )注解主键，标注主键与主键的生成方式</li>
</ul>
</li>
<li><h5 id="修改Mapper类"><a href="#修改Mapper类" class="headerlink" title="修改Mapper类"></a>修改Mapper类</h5><p>Mapper类需继承<code>BaseMapper&lt;T&gt;</code>，T表示对应实体类</p>
</li>
<li><h5 id="修改-mapper-xml"><a href="#修改-mapper-xml" class="headerlink" title="修改*mapper.xml"></a>修改*mapper.xml</h5><p>mapper中仅需mapper标签，mybatis plus会实现绝大部分的方法</p>
</li>
</ol>
<h4 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h4><p><a target="_blank" rel="noopener" href="https://mybatis.plus/guide/wrapper.html">条件构造器</a></p>
<h4 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h4><ol>
<li><h5 id="在mybatis-config-xml中添加插件"><a href="#在mybatis-config-xml中添加插件" class="headerlink" title="在mybatis-config.xml中添加插件"></a>在mybatis-config.xml中添加插件</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>使用IPage对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> IPage&lt;Area&gt; <span class="title">selectByPage</span><span class="params">(Integer pageNo, Integer lines)</span> </span>&#123;</span><br><span class="line">    IPage&lt;Area&gt; page = <span class="keyword">new</span> Page&lt;Area&gt;(pageNo, lines);</span><br><span class="line">    QueryWrapper&lt;Area&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;Area&gt;();</span><br><span class="line">    page = areaMapper.selectPage(page, queryWrapper);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> page;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://everyseptember.github.io/2019/03/19/SSM5-SSM/" data-id="ckp7osn4k000d0es5gx2v3xwq" data-title="SSM开发实战5-SSM" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSM/" rel="tag">SSM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A1%86%E6%9E%B6/" rel="tag">框架</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-SSM1-MyBatis" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/03/14/SSM1-MyBatis/" class="article-date">
  <time class="dt-published" datetime="2019-03-14T11:24:27.000Z" itemprop="datePublished">2019-03-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/03/14/SSM1-MyBatis/">SSM开发实战1-MyBatis</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="SSM-MyBatis"><a href="#SSM-MyBatis" class="headerlink" title="SSM-MyBatis"></a>SSM-MyBatis</h2><h3 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h3><h5 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h5><ul>
<li>优秀的持久层框架</li>
<li>使用XML将SQL与程序解耦，便于维护</li>
<li>学习简单，执行高效</li>
</ul>
<h5 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h5><p><img src="https://ws3.sinaimg.cn/large/005BYqpgly1g18elgio1pj30x80ky1jz.jpg" alt="步骤"></p>
<ol>
<li>引入MyBatis依赖</li>
<li>创建MyBatis配置文件</li>
<li>创建实体（Entity）类</li>
<li>创建Mapper映射文件</li>
<li>初始化SessionFactory</li>
<li>利用SqlSession对象操作数据</li>
</ol>
<h4 id="1-引入MyBatis依赖"><a href="#1-引入MyBatis依赖" class="headerlink" title="1.引入MyBatis依赖"></a>1.引入MyBatis依赖</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-创建MyBatis配置文件"><a href="#2-创建MyBatis配置文件" class="headerlink" title="2.创建MyBatis配置文件"></a>2.创建MyBatis配置文件</h4><p>在main/resources目录下创建mybatis-config.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 开启下划线转驼峰功能 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--配置数据库连接--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://39.104.126.40:3306/next-shop?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;soulOperation@0!8&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mappers/AreaMapper.xml&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-创建实体（Entity）类"><a href="#3-创建实体（Entity）类" class="headerlink" title="3.创建实体（Entity）类"></a>3.创建实体（Entity）类</h4><p>创建Entity包，在包下创建与表对应的实体类</p>
<h4 id="4-创建Mapper映射文件"><a href="#4-创建Mapper映射文件" class="headerlink" title="4.创建Mapper映射文件"></a>4.创建Mapper映射文件</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;AreaMapper&quot;</span>&gt;</span></span><br><span class="line">	...</span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="5-初始化SessionFactory"><a href="#5-初始化SessionFactory" class="headerlink" title="5.初始化SessionFactory"></a>5.初始化SessionFactory</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Reader reader = Resources.getResourceAsReader(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(reader);</span><br></pre></td></tr></table></figure>

<p>读取MyBatis核心配置文件，使用SessionFactory加载配置</p>
<h4 id="6-利用SqlSession对象操作数据"><a href="#6-利用SqlSession对象操作数据" class="headerlink" title="6.利用SqlSession对象操作数据"></a>6.利用SqlSession对象操作数据</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindAll</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    Reader reader = Resources.getResourceAsReader(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">    SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(reader);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打开session</span></span><br><span class="line">    SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">    <span class="comment">// 读取Mapper映射文件中的配置</span></span><br><span class="line">    List&lt;Area&gt; list = sqlSession.selectList(<span class="string">&quot;AreaMapper.findAll&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">        Area area = list.get(i);</span><br><span class="line">        System.out.println(area.getAreaName() + <span class="string">&quot;-&quot;</span> + area.getAddress());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://everyseptember.github.io/2019/03/14/SSM1-MyBatis/" data-id="ckp7osn4f00050es5hqcz4jlu" data-title="SSM开发实战1-MyBatis" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MyBatis/" rel="tag">MyBatis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSM/" rel="tag">SSM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A1%86%E6%9E%B6/" rel="tag">框架</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Java核心技术-基础" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/03/05/Java%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E5%9F%BA%E7%A1%80/" class="article-date">
  <time class="dt-published" datetime="2019-03-05T11:23:57.000Z" itemprop="datePublished">2019-03-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/03/05/Java%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E5%9F%BA%E7%A1%80/">Java核心技术-基础</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Exception-和-Error"><a href="#Exception-和-Error" class="headerlink" title="Exception 和 Error"></a>Exception 和 Error</h1><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><ul>
<li><p>Exception和Error都继承了Throwable类。Java中只有Throwable实例才可以被抛出或捕捉。</p>
</li>
<li><p>Exception 是程序正常运行中，可以预料的意外情况，可能并且应该被捕获，进行相应处理。</p>
</li>
<li><p>Error 是指在正常情况下，不大可能出现的情况，绝大部分的 Error 都会导致程序（比如 JVM 自身）处于非正常的、不可恢复状态。既然是非正常情况，所以不便于也不需要捕获。</p>
</li>
<li><p>Exception又分为<strong>可检查（checked）</strong>异常和<strong>不可检查（unchecked）</strong>异常。</p>
<ul>
<li>可检查异常在源代码里必须进行显示的捕捉处理，这是编译器检查的一部分；</li>
<li>不检查异常就是所谓的运行时异常，类似 <code>NullPointerException</code>、<code>ArrayIndexOutOfBoundsException</code>之类通常是可以避免的逻辑错误，需要根据需求来判断是否进行捕捉，编译时并不会强制要求。</li>
</ul>
</li>
</ul>
<h3 id="异常处理的原则"><a href="#异常处理的原则" class="headerlink" title="异常处理的原则"></a>异常处理的原则</h3><ol>
<li><p>尽量不要捕捉Exception这样的通用一场，而是应该捕捉特定异常。</p>
</li>
<li><p>不要生吞异常。</p>
<ul>
<li><p>即捕获异常之后应该做处理或者输出到日志中，而不是不做处理。</p>
</li>
<li><p>对于异常的处理，如果没有清晰的业务逻辑支持，可以保留原有异常的cause信息，直接抛出或者重新构建新的异常抛出。</p>
</li>
</ul>
</li>
</ol>
<h3 id="对性能的影响"><a href="#对性能的影响" class="headerlink" title="对性能的影响"></a>对性能的影响</h3><ul>
<li><code>try-catch</code>代码块会产生额外的性能开销：它会影响JVM对代码的优化。所以建议仅捕捉有可能产生异常的代码块，不要用<code>try-catch</code>包住一大块代码块。</li>
<li>Java每实例化一个Exception，都会对当时的栈进行快照，这是一个相对较重的操作。</li>
</ul>
<h1 id="final、finally和finalize"><a href="#final、finally和finalize" class="headerlink" title="final、finally和finalize"></a>final、finally和finalize</h1><h3 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h3><ul>
<li>final可以用来修饰类、方法、变量：final用来修饰类表示不可继承，修饰方法表示不可重写（override），修饰变量表示变量不可修改。</li>
<li>finally则是Java保证终点代码一定要被执行的一种机制，如<code>try-catch-finally</code>块。</li>
<li>finalize是基础类<code>java.lang.Object</code>，设计目的是保证对象在被GC之前完成特定资源的回收。finalize现在已经不推荐使用，JDK9开始已经被标记为<code>deprecated</code>。<ul>
<li>finalize被设计为在垃圾回收之前调用，JVM需要对它进行额外的处理。当实现了非空的finalize方法时，会是的垃圾回收出现指数倍的变慢。</li>
</ul>
</li>
</ul>
<h3 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h3><ul>
<li>final不是真正的不可改变，final只能约束对象的引用不被修改，但是对象值本身不会被影响。</li>
</ul>
<h1 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h1><p>强引用、软引用、弱引用、幻象引用</p>
<h3 id="定义-2"><a href="#定义-2" class="headerlink" title="定义"></a>定义</h3><ul>
<li>强引用，最常见的引用，被强引用的对象不会被GC。</li>
<li>软引用，可以让对象豁免一些垃圾回收。JVM只有在确保抛出OOM之前对软引用指向的对象进行清理。软引用通常用来实现内存敏感的缓存，保证了使用缓存的同时节省内存。</li>
<li>弱引用，不能使对象被GC豁免。它维护了一种非强制性的映射关系：当尝试获取对象时对象还在，就获取它，否则重新进行实例化。</li>
<li>幻象引用，有时也译成虚引用，不能通过它访问对象。幻象引用提供了一种在对象确保被finalize之后做某些事情的机制。</li>
</ul>
<h3 id="对象的可达性状态流转"><a href="#对象的可达性状态流转" class="headerlink" title="对象的可达性状态流转"></a>对象的可达性状态流转</h3><p><img src="https://ws3.sinaimg.cn/large/005BYqpgly1g0tbd02pv1j30dt0g9dfz.jpg" alt="对象生命周期与可达状态"></p>
<p>所有的引用类型，都是<code>java.lang.ref.Reference</code>的子类，该类提供了<code>get()</code>方法。</p>
<p>除了幻象应用，如果对象还没有被销毁，都可以通过get方法获取到原有对象，而幻象引用的get方法永远会返回null。利用该方法可以将软引用与弱引用访问的对象重新指向强引用。</p>
<p>若错误地保持了强引用，可能导致内存泄露。</p>
<h3 id="引用队列"><a href="#引用队列" class="headerlink" title="引用队列"></a>引用队列</h3><p>当一个引用所指向的对象被GC之后，该引用便会被enqueue到引用队列中。</p>
<p>利用引用队列可以再对象被GC之后进项一系列操作。</p>
<h3 id="显示影响软引用的GC"><a href="#显示影响软引用的GC" class="headerlink" title="显示影响软引用的GC"></a>显示影响软引用的GC</h3><p>软引用在最后一次引用之后，还会存在一段时间，默认值是根据剩余空间值计算的：</p>
<ul>
<li>在client模式中，剩余空间是计算当前堆空间空闲大小，所以倾向于回收</li>
<li>在server模式中，是根据-Xmx的最大值计算的</li>
</ul>
<p>在Java1.3.1开始，JVM提供参数<code>-XX:SoftRefLRUPolicyMSPerMB</code>，可以指定存在时间（以毫秒为单位）。</p>
<h3 id="Reachability-Fence"><a href="#Reachability-Fence" class="headerlink" title="Reachability Fence"></a>Reachability Fence</h3><p>JDK9的新特性，可以使用该模式来使得对象在没有强引用的情况下强可达。</p>
<p><code>Reference.reachabilityFence(this)</code>可以使对象保持不被GC。</p>
<h1 id="String、StringBuffer与StringBuilder"><a href="#String、StringBuffer与StringBuilder" class="headerlink" title="String、StringBuffer与StringBuilder"></a>String、StringBuffer与StringBuilder</h1><ul>
<li>String是一个Immutable类，声明为final，其属性也都是final的。由于其不可变性，所有的拼接裁剪等操作都会产生新的字符串。</li>
<li>StringBuffer是可变类。其本质上是一个线程安全的可修改字符串，保证了线程安全的同时加大了开销。</li>
<li>StringBuilder是Java1.5之后新增的，功能与StringBuffer相同，但是去掉了线程安全的部分，减小了开销。</li>
</ul>
<h3 id="字符串设计"><a href="#字符串设计" class="headerlink" title="字符串设计"></a>字符串设计</h3><p>String类是Immutable的典型实现，原生地保证了线程安全。由于不可以对内部数据进行更改，在函数拷贝时不需要额外复制其他数据。</p>
<p>StringBuffer通过将所有修改数据的方法都加上<code>synchronized</code>关键字来实现线程安全。</p>
<p>StringBuffer和StringBuilder底层是同时可修改的char数组（JDK9以后是byte数组），二者都继承了<code>AbstractStringBuilder</code>。数组的默认初始空间是16，如果后续有大量拼接操作，应该手动指定合适的大小，避免过多的扩容操作，影响性能。</p>
<p>在JDK8，非静态的String拼接会被JVM编译成StringBuilder操作；JDK9则将字符串的拼接与javac生成的字节码解耦。所以一般情况下不需要特别需要注意String造成的性能影响，仅需在关键节点（如循环中）注意即可。</p>
<h3 id="字符串缓存"><a href="#字符串缓存" class="headerlink" title="字符串缓存"></a>字符串缓存</h3><p>String在内存中有大量的重复。JDK提供了<code>intern()</code>方法，该方法可以将字符串缓存起来以便重复使用。</p>
<p>在JDK6中，不建议使用该方法：JDK6是将字符串缓存放置在<code>PermGen（永久代）</code>中，容易引起OOM；在之后的版本，缓存被移至堆中，且提供了修改默认缓存空间大小的JVM参数<code>-XX:StringTableSize=N</code>，提供了解决占用空间的问题。</p>
<p>intern是一种<strong>显式的排重机制</strong>，但并不方便实用，且难以保证效率。在<code>JDK 8U20</code>之后，Java提供了一个新特性，也就是G1 GC下的排重。该方法是JVM底层的改变，不需要改变代码。该特性默认是关闭的，可以使用参数<code>-XX:+UseStringDeduplication</code>来打开。</p>
<h1 id="Java反射机制、动态代理"><a href="#Java反射机制、动态代理" class="headerlink" title="Java反射机制、动态代理"></a>Java反射机制、动态代理</h1><p><a target="_blank" rel="noopener" href="https://www.sczyh30.com/posts/Java/java-reflection-1/">反射</a></p>
<h3 id="定义-3"><a href="#定义-3" class="headerlink" title="定义"></a>定义</h3><ul>
<li><p>反射机制是Java语言提供的一种基础功能，赋予程序在运行时能够观察并修改自身的能力。</p>
<p>通过反射我们可以直接操作类或者对象，比如获取某个对象的类定义，获取类声明的属性和方法，调用方法或者构造对象，甚至可以运行时修改类定义。</p>
</li>
<li><p>动态代理是一种方便运行时动态构建代理、动态处理方法调用的机制，很多场景都是利用类似机制做到的，比如用来包装RPC调用、面向切面的变成（AOP）。</p>
<p>实现动态代理的方法很多，比如JDK自身提供的动态代理，就是主要利用了反射机制。还有其他的实现方式，比如利用传说中更高性能的字节码操作机制，类似ASM、cglib（基于ASM）、Javassist等、</p>
</li>
</ul>
<h3 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h3><p>反射机制最大的作用之一便是可以加载一个在运行时才知道名称的class，获悉其构造方法，并生成其实体对象，能对其对象设值并唤起其方法。</p>
<h3 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h3><p>它首先是一个<strong>代理机制</strong>，代理可以看做是对调用目标的一个包装。很多动态代理场景，也可以看做是装饰器模式的应用。通过代理可以实现调用者与实现者之间的解耦。</p>
<h4 id="一个简单的JDK动态代理实现："><a href="#一个简单的JDK动态代理实现：" class="headerlink" title="一个简单的JDK动态代理实现："></a>一个简单的JDK动态代理实现：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDynamicProxy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        HelloImpl hello = <span class="keyword">new</span> HelloImpl();</span><br><span class="line">        MyInvocationHandler handler = <span class="keyword">new</span> MyInvocationHandler(hello);</span><br><span class="line">        Hello helloProxy = (Hello) Proxy.newProxyInstance(HelloImpl.class.getClassLoader(), HelloImpl.class.getInterfaces(), handler);</span><br><span class="line">        helloProxy.sayHello(<span class="string">&quot;Lu&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sayHello</span><span class="params">(String name)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloImpl</span> <span class="keyword">implements</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHello</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello &quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyInvocationHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Object target;</span><br><span class="line">    MyInvocationHandler(Object target) &#123;</span><br><span class="line">        <span class="keyword">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 实现反射调用</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> proxy</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> method</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> method.invoke(target, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="cglib-动态代理"><a href="#cglib-动态代理" class="headerlink" title="cglib 动态代理"></a>cglib 动态代理</h4><p>cglib采用的是创建目标类的子类的方式，因为是子类化，可以达到近似使用被吊用者本身的效果。Spring框架中支持JDK代理和cglib两种代理方式，可以显式指定。</p>
<h4 id="JDK代理和cglib代理优势对比"><a href="#JDK代理和cglib代理优势对比" class="headerlink" title="JDK代理和cglib代理优势对比"></a>JDK代理和cglib代理优势对比</h4><ul>
<li>JDK<ul>
<li>最小化依赖关系，意味着简化开发和维护；</li>
<li>平滑进行JDK升级，而字节码库通常需要更新以保证在新版本Java上使用；</li>
<li>代码实现简单。</li>
</ul>
</li>
<li>cglib<ul>
<li>不限定调用者实现接口；</li>
<li>只操作我们关心的类，而不必为其他类增加工作量；</li>
<li>高性能。</li>
</ul>
</li>
</ul>
<h1 id="int和Integer"><a href="#int和Integer" class="headerlink" title="int和Integer"></a>int和Integer</h1><ul>
<li><p>int是Java八个基础数据类型（boolean、byte、char、short、int、long、double、float）之一。</p>
<p>Java虽然是面向对象编程，但基础数据类型却不是对象。</p>
</li>
<li><p>Integer是int的包装类。它有一个int类型的字段存储值数据，并提供了对该数据的一些基本操作方法。在Java5中引入了自动装箱和自动拆箱功能，可根据上下文自动转换数据类型。</p>
<p>Integer的值缓存是Java5中引入的另一项改进：传统构建Integer的方法是直接调用其构造函数，new一个对象。但根据实践发现大部分的数据操作集中在一个较小的数据范围内，于是添加了静态工厂方法<code>valueOf</code>，使用该方法时会利用一个缓存机制来提升性能，这个缓存范围默认是-128到127。</p>
<p>其他的包装类也有对应的缓存和自动装拆箱机制。</p>
</li>
</ul>
<h3 id="自动装箱、自动拆箱"><a href="#自动装箱、自动拆箱" class="headerlink" title="自动装箱、自动拆箱"></a>自动装箱、自动拆箱</h3><p>自动装箱拆箱实际上是一种语法糖，发生在<strong>编译</strong>阶段。</p>
<p>javac帮我们把自动装箱替换为<code>Integer.valueOf()</code>，把自动拆箱替换为<code>Integer.intValue()</code>。</p>
<p>原则上，建议避免无意义的装箱和拆箱，过多的对象占用的空间和时间与基础数据类型有着数量级上的差距。</p>
<h3 id="Integer源码分析"><a href="#Integer源码分析" class="headerlink" title="Integer源码分析"></a>Integer源码分析</h3><ul>
<li>Integer缓存可以使用JVM参数<code>-XX:AutoBoxCacheMax=N</code>来指定；</li>
<li>Integer等其他包装类同String一样，是不可变类型，这样做的目的是保证数据安全；</li>
</ul>
<h3 id="Java原始数据类型和引用类型的局限性"><a href="#Java原始数据类型和引用类型的局限性" class="headerlink" title="Java原始数据类型和引用类型的局限性"></a>Java原始数据类型和引用类型的局限性</h3><ul>
<li><p>基础数据类型不能用作泛型</p>
<p>Java的泛型是伪泛型，Java编译时会讲泛型转换为对应的特定类型，这就保证泛型必须可以转换为Object。</p>
</li>
<li><p>无法高效的表达数据，也不便于表达复杂的数据结构</p>
</li>
</ul>
<h3 id="扩展：对象的内存结构"><a href="#扩展：对象的内存结构" class="headerlink" title="扩展：对象的内存结构"></a>扩展：对象的内存结构</h3><p>对象有三部分构成：对象头、对象实例、对齐填充。</p>
<ul>
<li>对象头包含两个部分：<ul>
<li>第一部分存储对象自身和运行时数据，如哈希码，GC分代年龄、锁状态标志，线程持有的锁、偏向线程ID、偏向时间戳等等，这部分数据的长度在32位和64位的虚拟机（未开启压缩指针）中分别为32bit和64bit，官方称它为<code>Mark Word</code>；</li>
<li>另一部分是类型指针，即对象指向它的类元数据的指针，虚拟机通过这个指针来确定这个对象时哪个类的实例。</li>
</ul>
</li>
<li>对象实例就是对象存储的真正有效信息，也就是程序代码中所定义的各种类型的字段内容，无论是在父类中继承下来的，还是在子类中定义的，都需要记录起来。</li>
<li>对其补充不是必要的，仅仅是起到占位符的作用。由于HotPot VM的自动内容管理系统要求对象的起始地址必须是8字节的整数倍，所以使用该部分对内容进行填充。</li>
</ul>
<h1 id="Vector、ArrayList和LinkedList"><a href="#Vector、ArrayList和LinkedList" class="headerlink" title="Vector、ArrayList和LinkedList"></a>Vector、ArrayList和LinkedList</h1><p>这三者都是实现集合框架中的有序集合（List），功能比较接近；但在行为、性能和安全性方面有较大差别。</p>
<ul>
<li>Vector是Java早期提供的<strong>线程安全的动态数组</strong>。Vector内部使用对象数组保存数据，使用数据拷贝进行动态扩容。如果不需要线程安全，不建议使用Vector，毕竟同步是需要额外开销的。</li>
<li>ArrayList也是<strong>动态数组</strong>，但并不是线程安全的，所以性能更好。ArrayList的扩容机制与Vector相同，不同之处在于Vector每次扩容100%，而ArrayList扩容50%。</li>
<li>LinkedList是Java提供的双向链表，所以它不需要调整容量，也不是线程安全的。</li>
</ul>
<h3 id="效率"><a href="#效率" class="headerlink" title="效率"></a>效率</h3><ul>
<li>Vector和ArrayList是动态数组，本质上也是数组操作，所以其随机访问能力更为优秀，而除了尾部的添加与删除操作性能较差。</li>
<li>LinkedList是链表，其插入和删除操作性能都很优秀，随机访问能力较差。</li>
</ul>
<h2 id="狭义的集合框架"><a href="#狭义的集合框架" class="headerlink" title="狭义的集合框架"></a>狭义的集合框架</h2><p>该框架不包括java.uitl.concurrent下的线程安全容器添加进来；也没有Map容器，虽然它不是真正的集合，但我们通常概念上也会把它当做集合框架的一部分。</p>
<p><img src="https://ws3.sinaimg.cn/large/005BYqpggy1g0xpb37ofpj30n70cc3z1.jpg" alt="集合框架"></p>
<p>Java的集合框架，Collection接口是所有集合的根，然后扩展了三大集合：</p>
<ul>
<li>List，有序集合，提供了方便的访问、插入、删除等操作。</li>
<li>Set，与List最大的差别是不允许有重复元素。</li>
<li>Queue/Deque，Java提供的标准队列结构的实现。除了集合的基本功能，还包括先入先出、先入后出等特定行为。这里并不包括BlockingQueue，因为通常是并发编程场合，所以放在并发包里。</li>
</ul>
<p>每种集合的通用逻辑被抽象到对用的抽象类中，如AbstractList。但每种集合也不是完全孤立的，比如LinkedList便同时是List和Deque。</p>
<h3 id="线程安全"><a href="#线程安全" class="headerlink" title="线程安全"></a>线程安全</h3><p>这些容器都不是线程安全的，但是在Collections工具类中提供了一系列的synchronized方法；它的实现就是将类中的方法都加上synchronized关键词。</p>
<h3 id="默认排序算法"><a href="#默认排序算法" class="headerlink" title="默认排序算法"></a>默认排序算法</h3><ul>
<li>对于基础数据类型，Java采用的是<a target="_blank" rel="noopener" href="http://hg.openjdk.java.net/jdk/jdk/file/26ac622a4cab/src/java.base/share/classes/java/util/DualPivotQuicksort.java">双轴快速排序算法（Dual-Pivot QuickSort）</a>，是一种改进的快速排序算法，早期版本采用的则是相对传统的排序算法。</li>
<li>对于对象数据类型，目前使用的是<a target="_blank" rel="noopener" href="http://hg.openjdk.java.net/jdk/jdk/file/26ac622a4cab/src/java.base/share/classes/java/util/TimSort.java">TimSort</a>，思想上也是一种归并和二分插入排序结合的优化排序算法。</li>
</ul>
<h3 id="扩展-1"><a href="#扩展-1" class="headerlink" title="扩展"></a>扩展</h3><p>在Java9中，Java标准类库提供了一系列的静态工厂方法，如<code>List.of()</code>、<code>Set.of()</code>等，大大简化了构建小容器的代码量。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; simpleList = List.of(&quot;Hello&quot;, &quot;World&quot;);</span><br></pre></td></tr></table></figure>

<h1 id="HashTable、HashMap和TreeMap"><a href="#HashTable、HashMap和TreeMap" class="headerlink" title="HashTable、HashMap和TreeMap"></a>HashTable、HashMap和TreeMap</h1><p>三者都是最为常见的一些Map实现，是以<strong>键值对</strong>存储和操作数据的容器类型。</p>
<ul>
<li>HashTable是早期Java类库提供的一个哈希表实现，本身是同步的，不支持null键和值，由于同步导致的性能开销，很少被推荐使用。</li>
<li>HashMap是应用更加广泛的哈希表实现，与HashTable的主要区别在于它本身不是同步的，且支持null键和值等。它的put和get操作通常情况下可以达到常量级的时间复杂度。它是绝大部分利用键值对存取场景的首选。</li>
<li>TreeMap是基于红黑树的一种提供顺序访问的Map，与HashMap不同的是它的数据操作都是<code>O(logn)</code>的时间复杂度。</li>
</ul>
<h2 id="Map结构"><a href="#Map结构" class="headerlink" title="Map结构"></a>Map结构</h2><p><img src="https://ws3.sinaimg.cn/large/005BYqpggy1g0xre0tjzaj30lc0dpmxe.jpg" alt="Map结构"></p>
<ul>
<li>HashTable作为早期集合相关类型，继承了Dictionary类，类结构上与其他Map明显不同。</li>
<li>HashMap等其他Map实现继承了AbstractMap，实现了里边的通用方法抽象。</li>
</ul>
<h3 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h3><p>大部分的Map场景是访问、增删等，对顺序没有要求，HashMap是这些场景的最优选择。HashMap的表现非常依赖哈希码的有效性，需要掌握hashCode和equals的一些基本约定，比如：</p>
<ul>
<li>equals相同，hashCode一定要相等；</li>
<li>重写了hashCode也一定要重写equals；</li>
<li>hashCode需要保证一致性，状态改变返回的哈希值仍然要一致；</li>
<li>equals的对称、反射、传递等特性。</li>
</ul>
<h3 id="顺序访问"><a href="#顺序访问" class="headerlink" title="顺序访问"></a>顺序访问</h3><ul>
<li><p>LinkedHashMap通常提供的是遍历顺序符合插入顺序或者访问顺序。</p>
<p>一个以LinkedHashMap为例设计的空间占用敏感的资源池，可以将最不长访问的对象释放掉：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedHashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedHashMapSample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        LinkedHashMap&lt;String, String&gt; accessOrderedMap = <span class="keyword">new</span> LinkedHashMap&lt;String, String&gt;(<span class="number">16</span>, <span class="number">0.75F</span>, <span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">removeEldestEntry</span><span class="params">(Map.Entry&lt;String, String&gt; eldest)</span> </span>&#123; <span class="comment">// 实现自定义删除策略，否则行为就和普遍 Map 没有区别</span></span><br><span class="line">                <span class="keyword">return</span> size() &gt; <span class="number">3</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        accessOrderedMap.put(<span class="string">&quot;Project1&quot;</span>, <span class="string">&quot;Valhalla&quot;</span>);</span><br><span class="line">        accessOrderedMap.put(<span class="string">&quot;Project2&quot;</span>, <span class="string">&quot;Panama&quot;</span>);</span><br><span class="line">        accessOrderedMap.put(<span class="string">&quot;Project3&quot;</span>, <span class="string">&quot;Loom&quot;</span>);</span><br><span class="line">        accessOrderedMap.forEach( (k,v) -&gt; &#123;</span><br><span class="line">            System.out.println(k +<span class="string">&quot;:&quot;</span> + v);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// 模拟访问</span></span><br><span class="line">        accessOrderedMap.get(<span class="string">&quot;Project2&quot;</span>);</span><br><span class="line">        accessOrderedMap.get(<span class="string">&quot;Project2&quot;</span>);</span><br><span class="line">        accessOrderedMap.get(<span class="string">&quot;Project3&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Iterate over should be not affected:&quot;</span>);</span><br><span class="line">        accessOrderedMap.forEach( (k,v) -&gt; &#123;</span><br><span class="line">            System.out.println(k +<span class="string">&quot;:&quot;</span> + v);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// 触发删除</span></span><br><span class="line">        accessOrderedMap.put(<span class="string">&quot;Project4&quot;</span>, <span class="string">&quot;Mission Control&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Oldest entry should be removed:&quot;</span>);</span><br><span class="line">        accessOrderedMap.forEach( (k,v) -&gt; &#123;<span class="comment">// 遍历顺序不变</span></span><br><span class="line">            System.out.println(k +<span class="string">&quot;:&quot;</span> + v);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>TreeMap则是由键的顺序决定的。</p>
</li>
</ul>
<h2 id="HashMap源码分析"><a href="#HashMap源码分析" class="headerlink" title="HashMap源码分析"></a>HashMap源码分析</h2><h3 id="HashMap结构"><a href="#HashMap结构" class="headerlink" title="HashMap结构"></a>HashMap结构</h3><p><img src="https://ws3.sinaimg.cn/large/005BYqpggy1g0xsmofjsnj30mg0ce3yp.jpg" alt="HashMap结构"></p>
<p>HashMap可以看做是由数组和链表结合组成的复合结构，数组被分成一个个桶，通过Hash值决定了键值对在数组中的寻址；哈希值相同的键值对则以链表形式存储。如果链表大小超过阈值（TREEIFY_THRESHOLD, 8），链表则会被改成树结构。</p>
<h3 id="HashMap的put逻辑"><a href="#HashMap的put逻辑" class="headerlink" title="HashMap的put逻辑"></a>HashMap的put逻辑</h3><p>HashMap的数组并不是在创建时就初始化好，而是在put的时候进行初始化。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">boolean</span> onlyIfAbent,</span></span></span><br><span class="line"><span class="params"><span class="function">               <span class="keyword">boolean</span> evit)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="keyword">int</span> , i;</span><br><span class="line">    <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || (n = tab.length) = <span class="number">0</span>)</span><br><span class="line">        n = (tab = resize()).length;</span><br><span class="line">    <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="keyword">null</span>)</span><br><span class="line">        tab[i] = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for first </span></span><br><span class="line">           treeifyBin(tab, hash);</span><br><span class="line">        <span class="comment">//  ... </span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>put方法调用了putVal方法，在该方法中：</p>
<ul>
<li><p>如果数组为null，会调用resize方法进行初始化；</p>
</li>
<li><p>resize方法除了初始化数组外，还会在容量不满足需求的时候进行扩容；</p>
</li>
<li><p>扩容的条件：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">    resize();</span><br></pre></td></tr></table></figure></li>
<li><p>具体的键值对在哈希表中的位置取决于：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i = (n - <span class="number">1</span>) &amp; hash</span><br></pre></td></tr></table></figure>

<p>不使用key本身的hashCode而是采用HashMap里的另一个Hash方法，原因是有些数据计算出的哈希值差异主要在高位，而 HashMap 里的哈希寻址是忽略容量以上的高位的，那么这种处理就可以有效避免类似情况下的哈希碰撞。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object kye)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h;</span><br><span class="line">    <span class="keyword">return</span> (key == <span class="keyword">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt;<span class="number">16</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="resize方法"><a href="#resize方法" class="headerlink" title="resize方法"></a>resize方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] resize() &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((newCap = oldCap &lt;&lt; <span class="number">1</span>) &lt; MAXIMUM_CAPACIY &amp;&amp;</span><br><span class="line">                oldCap &gt;= DEFAULT_INITIAL_CAPAITY)</span><br><span class="line">        newThr = oldThr &lt;&lt; <span class="number">1</span>; <span class="comment">// double there</span></span><br><span class="line">       <span class="comment">// ... </span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (oldThr &gt; <span class="number">0</span>) <span class="comment">// initial capacity was placed in threshold</span></span><br><span class="line">        newCap = oldThr;</span><br><span class="line">    <span class="keyword">else</span> &#123;  </span><br><span class="line">        <span class="comment">// zero initial threshold signifies using defaultsfults</span></span><br><span class="line">        newCap = DEFAULT_INITIAL_CAPAITY;</span><br><span class="line">        newThr = (<span class="keyword">int</span>)(DEFAULT_LOAD_ATOR* DEFAULT_INITIAL_CAPACITY；</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (newThr ==<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">float</span> ft = (<span class="keyword">float</span>)newCap * loadFator;</span><br><span class="line">        newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (<span class="keyword">float</span>)MAXIMUM_CAPACITY ?(<span class="keyword">int</span>)ft : Integer.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line">    threshold = neThr;</span><br><span class="line">    Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])<span class="keyword">new</span> Node[newap];</span><br><span class="line">    table = n；</span><br><span class="line">    <span class="comment">// 移动到新的数组结构 e 数组结构 </span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>不考虑极限情况（容量理论最大极限由MAXIMUM_CAPACITY指定，数值为1&lt;&lt;30，即2 的30次方）情况下：</p>
<ul>
<li>门限值等于<code>负载因子×容量</code>，如果构建HashMap的时候没有指定他们，那么就是依据相应的默认常量值；</li>
<li>门限通常以倍数进行调整（<code>newThr = oldThr &lt;&lt; 1</code>），根据putVal中的逻辑，当元素个数超过门限大小时，则调整Map大小；</li>
<li>扩容后，需要将老的数组中的元素重新放置到新的数组，这是扩容的一个主要开销来源。</li>
</ul>
<h3 id="容量、负载因子和树化"><a href="#容量、负载因子和树化" class="headerlink" title="容量、负载因子和树化"></a>容量、负载因子和树化</h3><p>容量和负载因子决定了可用的桶数量，如果空桶太多会浪费空间，使用太满又会严重影响性能。</p>
<p>哈希表空闲位置不多的时候，哈希冲突的概率都会大大提高。为了尽可能保证散列表的操作效率，一般情况下会尽可能保证散列表中有一定比例的空闲槽位。使用<strong>负载因子（load factor）</strong>来表示空位的多少。</p>
<p>负载因子的计算公式：<code>装入表中的元素个数 / 散列表的长度</code>。</p>
<p>装在因子越大，说明空闲位置越少，冲突越多，性能会下降。</p>
<p>对于负载因子</p>
<ul>
<li>如果没有特殊需求，不要随意修改，因为JDK自身的默认负载因子是非常符合通常场景的；</li>
<li>如果调整，建议不要超过0.75；</li>
<li>如果设置了过小的负载因子，会导致频繁的扩容。</li>
</ul>
<h4 id="树化与哈希碰撞拒绝服务攻击"><a href="#树化与哈希碰撞拒绝服务攻击" class="headerlink" title="树化与哈希碰撞拒绝服务攻击"></a>树化与哈希碰撞拒绝服务攻击</h4><p>在放置元素的过程中，如果发生哈希冲突，就会放到一个桶里形成链表。而链表是线性的，严重影响存取性能。</p>
<p>而哈希碰撞拒绝服务攻击便是构建大量哈希冲突的数据，利用这些数据大量与服务器交互，导致服务器CPU占满。</p>
<h1 id="容器的线程安全、ConcurrentHashMap"><a href="#容器的线程安全、ConcurrentHashMap" class="headerlink" title="容器的线程安全、ConcurrentHashMap"></a>容器的线程安全、ConcurrentHashMap</h1><p>Java在传统集合框架内部，除了提供同步容器，还提供了<strong>同步包装器（Synchronized Wrapper）</strong>；我们可以调用Collections工具类提供的包装方法，来获取一个同步包装容器。但是它们采用的是非常粗粒度的同步方式，高并发情况下，性能比较低下。</p>
<h2 id="ConcurrentHashMap"><a href="#ConcurrentHashMap" class="headerlink" title="ConcurrentHashMap"></a>ConcurrentHashMap</h2><p>HashTable本身比较低效，因为它的同步方式就是在方法上添加synchronized关键字。Collections提供的同步包装类也类似。</p>
<h3 id="ConcurrentHashMap早期的实现方式："><a href="#ConcurrentHashMap早期的实现方式：" class="headerlink" title="ConcurrentHashMap早期的实现方式："></a>ConcurrentHashMap早期的实现方式：</h3><p><img src="https://ws3.sinaimg.cn/large/005BYqpgly1g0z47blpvpj30oh0gzglz.jpg" alt="ConcurrentHashMap的早期实现方式"></p>
<ul>
<li>分离锁，也就是将内部进行分段（Segment），里边则是HashEntry的数组，和HashMap类似，哈希相同的条目也是以链表形式存放。</li>
<li>HashEntry内部使用volatile的value字段来保证可见性，也利用了不可变对象的机制以改进利用Unsafe提供的底层能力，比如 volatile access，去直接完成部分操作，以最优化新更能，毕竟Unsafe中的很多操作都是JVM intrinsic优化过的。</li>
</ul>
<p>ConcurrentHashMap的get操作主要是保证可见性，没有同步逻辑；其put方法时进行二次哈希避免哈希冲突，获取其Segment，然后进行线程安全的put操作。</p>
<p>ConcurrentHashMap在进行并发写操作时</p>
<ul>
<li>ConcurrentHashMap会获取再入锁，以保证数据一致性，Segment本身就是基于ReentrantLock的扩展实现，所以，在并发修改期间，相应Segment是被锁定的；</li>
<li>在最初阶段，进行重复性的扫描，以确定相应key值是否已经在数组里面，进而决定是更新还是放置操作；重复扫描、检测冲突时ConcurrentHashMap的常见技巧；</li>
<li>ConcurrentHashMap的扩容不是整体扩容，而是对Segment的扩容。</li>
</ul>
<h3 id="JDK8及之后的ConcurrentHashMap实现方式："><a href="#JDK8及之后的ConcurrentHashMap实现方式：" class="headerlink" title="JDK8及之后的ConcurrentHashMap实现方式："></a>JDK8及之后的ConcurrentHashMap实现方式：</h3><ul>
<li>结构上与HashMap非常相似：大的桶数组，内部是链表结构；</li>
<li>内部仍有Segment定义，但仅仅是为了保证序列化时的兼容性，不再有结构上的用处；</li>
<li>不再使用Segment使得初始化更加简化，修改为lazy-load模式，有效避免了初始开销；</li>
<li>数据存储利用volatile来保证可见性；</li>
<li>使用CAS等操作，在特定场景进行无锁并发操作；</li>
<li>使用Unsafe、LongAdder之类底层手段，进行极端情况的优化。</li>
</ul>
<p>初始化操作实现在 initTable 里面，这是一个典型的 CAS 使用场景，利用 volatile 的 sizeCtl 作为互斥手段：如果发现竞争性的初始化，就 spin 在那里，等待条件恢复；否则利用 CAS 设置排他标志。如果成功则进行初始化；否则重试。</p>
<p>PS：1.8以后的锁的颗粒度是加在链表头上的。</p>
<h1 id="IO、NIO"><a href="#IO、NIO" class="headerlink" title="IO、NIO"></a>IO、NIO</h1><ul>
<li>传统的java.io包基于流模型实现，提供了一些最熟知的IO功能，它的交互功能是同步、阻塞的；有时候java.net下提供的部分网络api也归类到同步阻塞io库；</li>
<li>java1.4中引入了java.nio包，可以构建多路复用的同步非阻塞IO程序；</li>
<li>java1.7中NIO有了进一步改进（NIO2），引入了异步非阻塞IO方式，也被称作<code>AIO(Asynchronous IO)</code>。异步IO基于事件和回调机制。</li>
</ul>
<h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><ul>
<li>同步或异步（synchronous/asynchronous）：同步是一种可靠的有序运行机制，进行同步操作时，后续的任务是等待当前调用返回才进行下一步；而异步不需要等待，通常依靠事件、回调等机制来实现任务次序关系。</li>
<li>阻塞与非阻塞（blocking/non-blocking）：当进行阻塞操作时，当前线程无法从事其它任务，只有条件就绪才能继续；而非阻塞操作不管IO是否结束，直接返回，相应结果在后台继续完成。</li>
</ul>
<p><img src="https://ws3.sinaimg.cn/large/005BYqpgly1g1jw4hsgmrj30mt0het9i.jpg" alt="Java IO结构图"></p>
<h3 id="java-io"><a href="#java-io" class="headerlink" title="java.io"></a>java.io</h3><p>输入输出流（InputStream/OutputStream）都是用于读写字节的</p>
<p>Reader/Writer是用于操作字符的，增加了字符解码编码功能。本质上计算机操作的都是字节，Reader/Writer相当于构建了应用逻辑和原始数据之间的桥梁</p>
<p>BufferedOutputStream等带缓冲区的实现，可以避免频繁的磁盘读写，进而提高了IO效率</p>
<p>很多IO工具类都实现了Closeable接口，因为需要进行资源的释放</p>
<h3 id="java-nio"><a href="#java-nio" class="headerlink" title="java.nio"></a>java.nio</h3><h4 id="主要组成部分："><a href="#主要组成部分：" class="headerlink" title="主要组成部分："></a>主要组成部分：</h4><ul>
<li><p>Buffer，高效的数据容器，除了boolean型，所有原始数据类型都有相应的Buffer实现</p>
</li>
<li><p>Channel，类似于在Linux上看到的文件描述符，是NIO中被用来支持批量式IO操作的一种抽象。</p>
<p>File或者Socket，通常被认为是比较高层次的抽象，而Channel则是更加操作系统层面的一种抽象，这也使得NIO得以充分利用现代操作系统底层机制，获得特定场景的性能优化。不同层次的抽象是相互关联的，可以通过Socket获取Channel，反之亦然。</p>
</li>
<li><p>Selector，是NIO实现多路复用的基础，它提供了一种高效机制可以检测到注册在Selector上的多个Channel中，是否有Channel处于就绪状态，进而实现了单线程对多Channel的高效管理。</p>
<p>Selector同样是基于底层操作系统，不同模式、不同版本都有区别。</p>
</li>
<li><p>Charset，提供Unicode字符串定义，NIO也提供了相应的编码解码器。</p>
</li>
</ul>
<h2 id="拓展：文件拷贝"><a href="#拓展：文件拷贝" class="headerlink" title="拓展：文件拷贝"></a>拓展：文件拷贝</h2><h3 id="拷贝实现机制分析"><a href="#拷贝实现机制分析" class="headerlink" title="拷贝实现机制分析"></a>拷贝实现机制分析</h3><h4 id="io库的输入输出流方式"><a href="#io库的输入输出流方式" class="headerlink" title="io库的输入输出流方式"></a>io库的输入输出流方式</h4><ul>
<li>用户空间（User Space）和内核空间（Kernel Space）：操作系统内核，硬件驱动等运行在内核空间，具有相对较高的特权；而用户空间则是给普通应用和服务使用</li>
<li>使用输入输出流读写时，实际上是进行了多次上下文切换，如读取数据时，先将内核态数据从磁盘读取到内核缓存，再切换到用户态数据从内核缓存读取到用户缓存；写入则步骤相反。</li>
</ul>
<h4 id="nio库的trasferTo方式"><a href="#nio库的trasferTo方式" class="headerlink" title="nio库的trasferTo方式"></a>nio库的trasferTo方式</h4><ul>
<li>在Linux和Unix上，则会用到零拷贝技术：不需要用户空间参与，提高性能。</li>
</ul>
<h4 id="Files-copy"><a href="#Files-copy" class="headerlink" title="Files.copy"></a>Files.copy</h4><h1 id="接口和抽象类"><a href="#接口和抽象类" class="headerlink" title="接口和抽象类"></a>接口和抽象类</h1><ul>
<li>接口是对行为的抽象，他是抽象方法的合集，利用接口可以达到API与实现分离的目的，接口不能实例化；不能包含任何非常量成员，任何filed都是隐含着public static final的意义；同时，没有非静态方法实现，要么是抽象方法，要么是静态方法。</li>
<li>抽象类是不能实例化的类，用abstract关键字修饰class，其目的主要是代码重用。除了不能实例化，形式上和一般的Java类没有太大区别，可以有一个或多个抽象方法，也可以没有抽象方法。抽象类大多用于抽取相关Java类的共同方法实现或者是共同成员变量，然后通过继承的方式达到代码复用的目的。</li>
</ul>
<h2 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h2><ul>
<li>Java单继承，多实现</li>
<li>抽象类可以提供非抽象方法作为对子类的能力扩展，子类无需添加额外的代码便可以实现相应的功能</li>
<li>对于接口，可以提供一系列的抽象方法，其实现类需要将其实现；同时，也有一些接口没有任何抽象方法，仅仅是为了声明某些东西，它们通常被称作Marker Interface。</li>
<li>Java8增加了对函数式编程的支持，所以有增加了一类定义，即functional interface，是只有一个抽象方法的接口。使用<code>@FunctionalInterface</code>标记。Lamda表达式本身就可以看做是一类functional interface。</li>
<li>Java8以后，接口可以有方法实现。Java8增加了interface对default method的支持。</li>
</ul>
<h3 id="面向对象设计"><a href="#面向对象设计" class="headerlink" title="面向对象设计"></a>面向对象设计</h3><ul>
<li><strong>封装</strong>：隐藏内部实施细节，提高安全性和简化编程。</li>
<li><strong>继承</strong>：代码复用的基础机制。</li>
<li><strong>多态</strong>：重载，重写，向上转型</li>
</ul>
<h4 id="S-O-L-I-D原则"><a href="#S-O-L-I-D原则" class="headerlink" title="S.O.L.I.D原则"></a>S.O.L.I.D原则</h4><ul>
<li>单一原则（Single Responsibility），类或者对象最好只有单一职责，在程序设计中如果某个类承担多种义务，需要进行拆分。</li>
<li>开关职责（Open-CLose，Open for extension，Close for modification），设计要对扩展开放，对修改关闭。</li>
<li>里氏替换（Liskov Substitution），面向对象的基本要素之一，进行继承关系抽象时，凡是可以用父类或基类的地方，都可以用子类代替。</li>
<li>接口分离（Interface Segregation），在进行类和接口设计时，保证接口的功能单一性，可以功能复杂的接口拆分成多个接口，保证程序的内聚性。</li>
<li>依赖反转（Dependency Inversion），实体应该依赖于抽象而不是实现。就是说高层次模块不应该依赖于低层次模块，而应该基于抽象。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://everyseptember.github.io/2019/03/05/Java%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E5%9F%BA%E7%A1%80/" data-id="ckp7osn72005o0es51q611z0z" data-title="Java核心技术-基础" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/" rel="tag">Java核心技术</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-算法-二分查找" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/02/25/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/" class="article-date">
  <time class="dt-published" datetime="2019-02-25T12:24:45.000Z" itemprop="datePublished">2019-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/02/25/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/">算法-二分查找</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="二分查找"><a href="#二分查找" class="headerlink" title="二分查找"></a>二分查找</h3><p>二分查找针对的是一个有序的数据集合，每次通过与区间中间的元素进行对比，将查找区间缩小为当前的一般，直到找到目标数据或者区间为0。</p>
<h5 id="时间复杂度"><a href="#时间复杂度" class="headerlink" title="时间复杂度"></a>时间复杂度</h5><p><img src="https://ws3.sinaimg.cn/large/005BYqpgly1g0k1j3kcv2j30vq09daaj.jpg" alt="时间复杂度"></p>
<p>二分查找的区间每次都会变成上次的二分之一，当经过k次查找区间大小变为1的时候，数据被找到，即<code>n/(2^k) = 1</code>，此时<code>k = log2 n</code>，则其时间复杂度即为<code>O(logn)</code>。</p>
<h5 id="局限性"><a href="#局限性" class="headerlink" title="局限性"></a>局限性</h5><ul>
<li>二分查找依赖顺序表结构</li>
<li>二分查找只能针对有序结构</li>
<li>数据量太大时不适合二分查找<ul>
<li>太大的数据需要足够的连续空间去加载数组，相当耗费空间</li>
</ul>
</li>
</ul>
<h5 id="无重复数据的二分查找"><a href="#无重复数据的二分查找" class="headerlink" title="无重复数据的二分查找"></a>无重复数据的二分查找</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 循环实现</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> array</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> n</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">binarySearchA</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> n, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> head = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> tail = n - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(head &lt;= tail) &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = (head + tail) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (array[mid] &lt; value) &#123;</span><br><span class="line">            head = mid + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (array[mid] &gt; value) &#123;</span><br><span class="line">            tail = mid - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> mid;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="变体：查找重复数据的第一位置"><a href="#变体：查找重复数据的第一位置" class="headerlink" title="变体：查找重复数据的第一位置"></a>变体：查找重复数据的第一位置</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查找重复数据的第一位置</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">binarySearchC</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = a.length;</span><br><span class="line">    <span class="keyword">int</span> low = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> high = n - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (low &lt;= high) &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = low + (high - low) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (a[mid] &gt; value) &#123;</span><br><span class="line">            high = mid - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[mid] &lt; value) &#123;</span><br><span class="line">            low = mid + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (mid == <span class="number">0</span> || a[mid - <span class="number">1</span>] != value) &#123;</span><br><span class="line">                <span class="keyword">return</span> mid;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                high = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>  -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="变体：查找最后一个小于目标值的位置"><a href="#变体：查找最后一个小于目标值的位置" class="headerlink" title="变体：查找最后一个小于目标值的位置"></a>变体：查找最后一个小于目标值的位置</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查找最后一个小于目标值的位置</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">binarySearchF</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = a.length;</span><br><span class="line">    <span class="keyword">int</span> low = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> high = n - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (low &lt;= high) &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = low + (high - low) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (a[mid] &gt;= value) &#123;</span><br><span class="line">            high = mid - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (mid == n - <span class="number">1</span> || a[mid + <span class="number">1</span>] &gt; value) &#123;</span><br><span class="line">                <span class="keyword">return</span> mid;</span><br><span class="line">            &#125;</span><br><span class="line">            low = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>  -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="跳表的二分查找"><a href="#跳表的二分查找" class="headerlink" title="跳表的二分查找"></a>跳表的二分查找</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 跳表</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SkipList</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_LEVEL = <span class="number">16</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> levelCount = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node head = <span class="keyword">new</span> Node();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Random random = <span class="keyword">new</span> Random();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Node <span class="title">find</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        Node p = head;</span><br><span class="line">        <span class="comment">// 从最高层开始向下循环</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = levelCount - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="comment">// 寻找小于目标值的最大节点</span></span><br><span class="line">            <span class="keyword">while</span> (p.forwards[i] != <span class="keyword">null</span> &amp;&amp; p.forwards[i].data &lt; value) &#123;</span><br><span class="line">                p = p.forwards[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 若找到的最大节点的下一节点与目标值相等，则返回下一节点，否则返回空</span></span><br><span class="line">        <span class="keyword">if</span> (p.forwards[<span class="number">0</span>] != <span class="keyword">null</span> &amp;&amp; p.forwards[<span class="number">0</span>].data == value) &#123;</span><br><span class="line">            <span class="keyword">return</span> p.forwards[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> data = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> maxLevel = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 该节点在所有maxLevel层级及以下可见节点组成的数组</span></span><br><span class="line">        <span class="keyword">private</span> Node[] forwards = <span class="keyword">new</span> Node[MAX_LEVEL];</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Node&#123;&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;data=&quot;</span> + data +</span><br><span class="line">                    <span class="string">&quot;, maxLevel=&quot;</span> + maxLevel +</span><br><span class="line">                    <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://everyseptember.github.io/2019/02/25/%E7%AE%97%E6%B3%95-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/" data-id="ckp7osn5n001t0es590qud3qh" data-title="算法-二分查找" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/" rel="tag">二分查找</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-数据结构-线性表" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/02/16/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%BA%BF%E6%80%A7%E8%A1%A8/" class="article-date">
  <time class="dt-published" datetime="2019-02-16T07:37:47.000Z" itemprop="datePublished">2019-02-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/02/16/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%BA%BF%E6%80%A7%E8%A1%A8/">数据结构-线性表</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="线性表"><a href="#线性表" class="headerlink" title="线性表"></a>线性表</h1><p>线性表就是数据排成一条线一样的结构，每个线性表上的数据最多只有前后两个方向。</p>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p>数组具有连续的内存空间和相同类型的数据。</p>
<h3 id="数组的随机访问"><a href="#数组的随机访问" class="headerlink" title="数组的随机访问"></a>数组的随机访问</h3><p>以<code>int[] a = new int[10]</code>为例，当数组在初始化的时候，实际上申请了一块10个int长度的连续内存空间。</p>
<p>此时，只需要记住数组的首地址就可以了，当需要访问数组中某一元素的数据，计算<code>首地址 + k * 数据长度</code>便可以得到目标数据的地址。</p>
<h3 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h3><p>数组进行插入操作时，需要将目标位置及之后的所有数据都后移一位。</p>
<p>当插入位置在末位时，无须移动数据，其最好时间复杂度为<code>O(1)</code>；当插入位置在首位时，需要移动所有数据，其最坏时间复杂度为<code>O(n)</code>；以此计算平均时间复杂度<code>(1 + 2 + 3 + ... + n) / n</code>，即<code>O(n)</code>。</p>
<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><p>删除操作与插入操作复杂度相同，但可以采用假删除的方式来减少移动数据的次数。</p>
<p>在数组执行删除操作时，可以先将删除的数据记录下来，而不是真正删除数据；当数组空间不足时，再将数据真正删除，并移动其他数据。这一思想与JVM的GC操作十分相似。</p>
<h3 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h3><p>容器类封装了许多操作，可以使操作更加简易，且支持动态扩容。但其本质仍然是数组操作。</p>
<p>Java中提供的ArrayList便是一种数组的容器类。</p>
<h2 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h2><p>链表不需要连续的内容空间，它可以通过指针将不连续的内存空间串联起来。我们将一个内存空间称为<strong>节点</strong>。</p>
<h3 id="单链表"><a href="#单链表" class="headerlink" title="单链表"></a>单链表</h3><p>单链表中的节点除了存储数据之外，还需要记录下一个节点的地址，把这个记录下个地址的指针叫做<strong>后继指针</strong>。在单链表中，尾节点的后继指针指向一个空地址NULL。</p>
<h4 id="插入删除"><a href="#插入删除" class="headerlink" title="插入删除"></a>插入删除</h4><p>链表的插入删除操作十分简单，由于链表内存空间不连续，所以不需要进行数据搬运；仅需更改目标位置和新插入节点的指针即可。其时间复杂度是<code>O(1)</code>。</p>
<p><img src="https://ws3.sinaimg.cn/large/005BYqpggy1g09eqqwuhej30vq0i2dhb.jpg" alt="链表插入删除操作"></p>
<h4 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h4><p>链表查找的性能较差，只能每个节点依次遍历进行查询。其时间复杂度是<code>O(n)</code>。</p>
<h3 id="循环链表"><a href="#循环链表" class="headerlink" title="循环链表"></a>循环链表</h3><p>循环链表是一种特殊的单链表，其后继指针不是NULL，而是指向头结点。</p>
<h3 id="双向链表"><a href="#双向链表" class="headerlink" title="双向链表"></a>双向链表</h3><p>双向链表与单链表的差别在于双向链表有两个指针，除后继指针之外还有指向前一节点的<strong>前驱指针</strong>。</p>
<p>双向链表由于多出一个指针，多以它相对于单链表也更加占用空间。但同时在数据操作上也比但指针更加高效。</p>
<h4 id="插入删除-1"><a href="#插入删除-1" class="headerlink" title="插入删除"></a>插入删除</h4><ul>
<li>在进行插入删除操作时，由于单链表没有前驱指针，在指定位置进行操作时，往往需要对数据重新遍历以找到目标位置的前一节点来修改新的指针地址。</li>
</ul>
<h4 id="查找-1"><a href="#查找-1" class="headerlink" title="查找"></a>查找</h4><p>对有序链表，可以头尾同时查找，或者在已知某一节点的情况下，向前或向后查找，这使得查询速度优于单链表。</p>
<h3 id="双向循环链表"><a href="#双向循环链表" class="headerlink" title="双向循环链表"></a>双向循环链表</h3><p>理同循环链表。</p>
<h3 id="哨兵节点（头结点）"><a href="#哨兵节点（头结点）" class="headerlink" title="哨兵节点（头结点）"></a>哨兵节点（头结点）</h3><p>对于空链表，在插入或删除操作时就需要对节点进行特殊判断。引入一个值永远为空的哨兵节点可以使代码更加一致。</p>
<p>哨兵节点是链表一直都存在的附加节点，它是链表真正的第一节点，它一直存在且不存储任何内容。</p>
<h2 id="跳表"><a href="#跳表" class="headerlink" title="跳表"></a>跳表</h2><p>跳表是一种<strong>动态数据结构</strong>。使用另外几条链表建立<strong>索引层</strong>，即将原链表每几个数据提取建立新的链表，变减少了节点的数量，在本层索引找到两个节点之间的位置便可以进入下一层继续寻找。</p>
<p><img src="https://ws3.sinaimg.cn/large/005BYqpgly1g0l8rvargyj30vq0ifjtf.jpg" alt="跳表"></p>
<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><ul>
<li>插入新数据时随机确定新数据的最高层级数</li>
<li>插入数据时找到小于目标值的最大节点，并将该节点属性赋给新节点，然后该节点指向新节点</li>
<li>查找数据时从该表的最高层级开始向下循环</li>
<li>删除数据时使用0层级判断，但需要断开该节点所有层级的连接</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 跳表</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SkipList</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_LEVEL = <span class="number">16</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> levelCount = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node head = <span class="keyword">new</span> Node();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Random random = <span class="keyword">new</span> Random();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Node <span class="title">find</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        Node p = head;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = levelCount - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="keyword">while</span> (p.forwards[i] != <span class="keyword">null</span> &amp;&amp; p.forwards[i].data &lt; value) &#123;</span><br><span class="line">                p = p.forwards[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (p.forwards[<span class="number">0</span>] != <span class="keyword">null</span> &amp;&amp; p.forwards[<span class="number">0</span>].data == value) &#123;</span><br><span class="line">            <span class="keyword">return</span> p.forwards[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> level = randomLevel();</span><br><span class="line">        Node newNode = <span class="keyword">new</span> Node();</span><br><span class="line">        newNode.data = value;</span><br><span class="line">        newNode.maxLevel = level;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 新节点组成的纵向数组</span></span><br><span class="line">        Node[] update = <span class="keyword">new</span> Node[level];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; level; ++i) &#123;</span><br><span class="line">            update[i] = head;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node p = head;</span><br><span class="line">        <span class="comment">// 由不同层级依次由上向下循环遍历数据</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="comment">// 寻找当前层级上可以预见的小于目标值的最大节点</span></span><br><span class="line">            <span class="keyword">while</span> (p.forwards[i] != <span class="keyword">null</span> &amp;&amp; p.forwards[i].data &lt; value) &#123;</span><br><span class="line">                p = p.forwards[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 将找到的目标节点赋值给新节点数组</span></span><br><span class="line">            update[i] = p;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; level; ++i) &#123;</span><br><span class="line">            <span class="comment">// 将较小的旧节点属性赋值给新节点</span></span><br><span class="line">            newNode.forwards[i] = update[i].forwards[i];</span><br><span class="line">            <span class="comment">// 将新节点作为属性赋值给较小的旧节点</span></span><br><span class="line">            update[i].forwards[i] = newNode;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (levelCount &lt; level) &#123;</span><br><span class="line">            levelCount = level;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        Node[] update = <span class="keyword">new</span> Node[levelCount];</span><br><span class="line">        Node p = head;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = levelCount - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="keyword">while</span> (p.forwards[i] != <span class="keyword">null</span> &amp;&amp; p.forwards[i].data &lt; value) &#123;</span><br><span class="line">                p = p.forwards[i];</span><br><span class="line">            &#125;</span><br><span class="line">            update[i] = p;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (p.forwards[<span class="number">0</span>] != <span class="keyword">null</span> &amp;&amp; p.forwards[<span class="number">0</span>].data == value) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = levelCount - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">                <span class="keyword">if</span> (update[i].forwards[i] != <span class="keyword">null</span> &amp;&amp; update[i].forwards[i].data == value) &#123;</span><br><span class="line">                    update[i].forwards[i] = update[i].forwards[i].forwards[i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取随机层数</span></span><br><span class="line"><span class="comment">     * 循环的作用是防止伪随机</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">randomLevel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> level = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; MAX_LEVEL; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (random.nextInt() % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">                level++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> level;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Node p = head;</span><br><span class="line">        <span class="keyword">while</span> (p.forwards[<span class="number">0</span>] != <span class="keyword">null</span>) &#123;</span><br><span class="line">            System.out.println(p.forwards[<span class="number">0</span>] + <span class="string">&quot;&quot;</span>);</span><br><span class="line">            p = p.forwards[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> data = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> maxLevel = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 该节点在所有maxLevel层级及以下可见节点组成的数组</span></span><br><span class="line">        <span class="keyword">private</span> Node[] forwards = <span class="keyword">new</span> Node[MAX_LEVEL];</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Node&#123;&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;data=&quot;</span> + data +</span><br><span class="line">                    <span class="string">&quot;, maxLevel=&quot;</span> + maxLevel +</span><br><span class="line">                    <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h2><p>后进先出，先进后出，这就是典型的“栈”结构。栈是一种操作受限的线性表，只允许在一段插入和删除数据。</p>
<p>用数组实现的栈叫做<strong>顺序栈</strong>，用链表实现的栈叫做<strong>链式栈</strong>。</p>
<h3 id="顺序栈"><a href="#顺序栈" class="headerlink" title="顺序栈"></a>顺序栈</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用数组实现的顺序栈</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Lu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019-2-17 17:21:57</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayStack</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 实现数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String[] items;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 栈大小</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 栈中现有元素数量</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化栈</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> n 栈的大小</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ArrayStack</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.items = <span class="keyword">new</span> String[n];</span><br><span class="line">        <span class="keyword">this</span>.n = n;</span><br><span class="line">        <span class="keyword">this</span>.count = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 入栈操作</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item 入栈数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 是否入栈成功</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">push</span><span class="params">(String item)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 如果栈已满，则入栈失败</span></span><br><span class="line">        <span class="keyword">if</span> (count == n) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 动态扩容（并不常用）</span></span><br><span class="line">        <span class="comment">/*if (count == n) &#123;</span></span><br><span class="line"><span class="comment">            String[] temp = new String[n * 2];</span></span><br><span class="line"><span class="comment">            System.arraycopy(items, 0, temp, 0, n);</span></span><br><span class="line"><span class="comment">            n *= 2;</span></span><br><span class="line"><span class="comment">            this.items = temp;</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">        <span class="comment">// 将数据放到当前栈的位置</span></span><br><span class="line">        items[count++] = item;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 如果栈为空，返回null</span></span><br><span class="line">        <span class="keyword">if</span> (count == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 返回count - 1的元素</span></span><br><span class="line">        String temp = items[count-- - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="栈的应用"><a href="#栈的应用" class="headerlink" title="栈的应用"></a>栈的应用</h3><ul>
<li><p>函数调用栈</p>
</li>
<li><p>表达式求值</p>
<p>表达式求值是利用两个栈分别存储数字和运算符，当有数字则直接压入数字栈，有运算符则受限与当前栈顶运算符进行比较：如果优先级高于当前栈顶运算符则压入运算符栈，否则取当前数字栈顶的两个数字和运算符栈顶的运算符进行计算，并将计算结果压入数字栈，并继续进行运算符比较。</p>
<p><img src="https://ws3.sinaimg.cn/large/005BYqpgly1g0asoawbevj30vq0lywgv.jpg" alt="栈实现表达式求值"></p>
</li>
<li><p>成对符号匹配</p>
</li>
</ul>
<h2 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h2><p>先进先出，就是一种典型的队列结构。队列跟栈一样，也是一种操作受限的线性表数据结构。</p>
<p>与栈同理，用数组实现的队列叫做<strong>顺序队列</strong>，用链表实现的队列叫做<strong>链式队列</strong>。</p>
<h3 id="循环队列"><a href="#循环队列" class="headerlink" title="循环队列"></a>循环队列</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 循环队列</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Lu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019-2-18 19:40:43</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayQueue</span> </span>&#123;</span><br><span class="line">    <span class="comment">/** 数组 */</span></span><br><span class="line">    <span class="keyword">private</span> String[] items;</span><br><span class="line">    <span class="comment">/** 队列长度 */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n;</span><br><span class="line">    <span class="comment">/** 队首下标 */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> head = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/** 队尾下标 */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> tail = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/** 已有元素长度 */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ArrayQueue</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.items = <span class="keyword">new</span> String[n];</span><br><span class="line">        <span class="keyword">this</span>.n = n;</span><br><span class="line">        <span class="keyword">this</span>.count = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 入队操作</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item 入队元素</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 是否入队成功</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">enqueue</span><span class="params">(String item)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 判断空间是否充足</span></span><br><span class="line">        <span class="keyword">if</span> (head == tail &amp;&amp; count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 入队</span></span><br><span class="line">        items[tail++] = item;</span><br><span class="line">        <span class="keyword">if</span> (tail == n) &#123;</span><br><span class="line">            tail = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 元素计数+1</span></span><br><span class="line">        ++count;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 出队操作</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 出队元素</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">dequeue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 判断当前是否是空队列</span></span><br><span class="line">        <span class="keyword">if</span> (head == tail &amp;&amp; count == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 出队</span></span><br><span class="line">        String temp = items[head++];</span><br><span class="line">        <span class="keyword">if</span> (head == n) &#123;</span><br><span class="line">            head = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 元素计数-1</span></span><br><span class="line">        --count;</span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用空元素实现的循环队列</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Lu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019-2-18 19:40:43</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayQueue2</span> </span>&#123;</span><br><span class="line">    <span class="comment">/** 数组 */</span></span><br><span class="line">    <span class="keyword">private</span> String[] items;</span><br><span class="line">    <span class="comment">/** 队列长度 */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n;</span><br><span class="line">    <span class="comment">/** 队首下标 */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> head = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/** 队尾下标 */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> tail = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ArrayQueue2</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.items = <span class="keyword">new</span> String[n];</span><br><span class="line">        <span class="keyword">this</span>.n = n;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 入队操作</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item 入队元素</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 是否入队成功</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">enqueue</span><span class="params">(String item)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 判断空间是否充足</span></span><br><span class="line">        <span class="keyword">if</span> ((tail + <span class="number">1</span>) % n == head) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 入队</span></span><br><span class="line">        items[tail] = item;</span><br><span class="line">        tail = (tail + <span class="number">1</span>) % n;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 出队操作</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 出队元素</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">dequeue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 判断当前是否是空队列</span></span><br><span class="line">        <span class="keyword">if</span> (head == tail) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 出队</span></span><br><span class="line">        String temp = items[head];</span><br><span class="line">        head = (head + <span class="number">1</span>) % n;</span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="阻塞队列"><a href="#阻塞队列" class="headerlink" title="阻塞队列"></a>阻塞队列</h3><p>在队列基础上加上阻塞操作：在队列为空的时候，阻塞出队操作；在队列已满的时候，阻塞入队操作。</p>
<h3 id="并发队列"><a href="#并发队列" class="headerlink" title="并发队列"></a>并发队列</h3><p>线程安全的队列叫做并发队列。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://everyseptember.github.io/2019/02/16/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%BA%BF%E6%80%A7%E8%A1%A8/" data-id="ckp7osn5c001e0es5b4qc3aja" data-title="数据结构-线性表" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BA%BF%E6%80%A7%E8%A1%A8/" rel="tag">线性表</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; 上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Freemarker/" rel="tag">Freemarker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/" rel="tag">Java多线程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/" rel="tag">Java核心技术</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis/" rel="tag">MyBatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL%E5%9F%BA%E7%A1%80/" rel="tag">MySQL基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/" rel="tag">MySQL存储引擎</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSM/" rel="tag">SSM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-MVC/" rel="tag">Spring MVC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Web/" rel="tag">Spring Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Springboot%E7%AC%94%E8%AE%B0/" rel="tag">Springboot笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Springboot%E9%9B%B6%E6%95%A3%E7%AC%94%E8%AE%B0/" rel="tag">Springboot零散笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/" rel="tag">二分查找</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" rel="tag">二叉树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/" rel="tag">分库分表</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE/" rel="tag">参数配置</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%93%88%E5%B8%8C/" rel="tag">哈希</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE/" rel="tag">图</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="tag">基础知识</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A0%86/" rel="tag">堆</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8C%B9%E9%85%8D/" rel="tag">字符串匹配</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F/" rel="tag">开发模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%85%A2SQL%E6%97%A5%E5%BF%97/" rel="tag">慢SQL日志</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92/" rel="tag">执行计划</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F/" rel="tag">排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%A3%E5%88%97%E8%A1%A8/" rel="tag">散列表</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9E%B6%E6%9E%84/" rel="tag">架构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91/" rel="tag">树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A1%86%E6%9E%B6/" rel="tag">框架</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%B4%A2%E5%BC%95/" rel="tag">索引</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%A2%E9%BB%91%E6%A0%91/" rel="tag">红黑树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E6%80%A7%E8%A1%A8/" rel="tag">线性表</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%90%E7%BB%B4/" rel="tag">运维</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%9E%E7%BA%BF%E6%80%A7%E8%A1%A8/" rel="tag">非线性表</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Freemarker/" style="font-size: 10px;">Freemarker</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 10px;">Java多线程</a> <a href="/tags/Java%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/" style="font-size: 11.67px;">Java核心技术</a> <a href="/tags/MyBatis/" style="font-size: 10px;">MyBatis</a> <a href="/tags/MySQL/" style="font-size: 18.33px;">MySQL</a> <a href="/tags/MySQL%E5%9F%BA%E7%A1%80/" style="font-size: 10px;">MySQL基础</a> <a href="/tags/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/" style="font-size: 10px;">MySQL存储引擎</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/SSM/" style="font-size: 16.67px;">SSM</a> <a href="/tags/Spring/" style="font-size: 11.67px;">Spring</a> <a href="/tags/Spring-MVC/" style="font-size: 11.67px;">Spring MVC</a> <a href="/tags/Spring-Web/" style="font-size: 10px;">Spring Web</a> <a href="/tags/Springboot%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">Springboot笔记</a> <a href="/tags/Springboot%E9%9B%B6%E6%95%A3%E7%AC%94%E8%AE%B0/" style="font-size: 20px;">Springboot零散笔记</a> <a href="/tags/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/" style="font-size: 10px;">二分查找</a> <a href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" style="font-size: 13.33px;">二叉树</a> <a href="/tags/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/" style="font-size: 10px;">分库分表</a> <a href="/tags/%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE/" style="font-size: 10px;">参数配置</a> <a href="/tags/%E5%93%88%E5%B8%8C/" style="font-size: 10px;">哈希</a> <a href="/tags/%E5%9B%BE/" style="font-size: 10px;">图</a> <a href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" style="font-size: 10px;">基础知识</a> <a href="/tags/%E5%A0%86/" style="font-size: 10px;">堆</a> <a href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8C%B9%E9%85%8D/" style="font-size: 10px;">字符串匹配</a> <a href="/tags/%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">开发模式</a> <a href="/tags/%E6%85%A2SQL%E6%97%A5%E5%BF%97/" style="font-size: 10px;">慢SQL日志</a> <a href="/tags/%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92/" style="font-size: 10px;">执行计划</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size: 10px;">排序</a> <a href="/tags/%E6%95%A3%E5%88%97%E8%A1%A8/" style="font-size: 10px;">散列表</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 20px;">数据库</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 18.33px;">数据结构</a> <a href="/tags/%E6%9E%B6%E6%9E%84/" style="font-size: 13.33px;">架构</a> <a href="/tags/%E6%A0%91/" style="font-size: 13.33px;">树</a> <a href="/tags/%E6%A1%86%E6%9E%B6/" style="font-size: 16.67px;">框架</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 15px;">算法</a> <a href="/tags/%E7%B4%A2%E5%BC%95/" style="font-size: 10px;">索引</a> <a href="/tags/%E7%BA%A2%E9%BB%91%E6%A0%91/" style="font-size: 10px;">红黑树</a> <a href="/tags/%E7%BA%BF%E6%80%A7%E8%A1%A8/" style="font-size: 10px;">线性表</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">设计模式</a> <a href="/tags/%E8%BF%90%E7%BB%B4/" style="font-size: 11.67px;">运维</a> <a href="/tags/%E9%9D%9E%E7%BA%BF%E6%80%A7%E8%A1%A8/" style="font-size: 15px;">非线性表</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/05/19/CAP/">CAP</a>
          </li>
        
          <li>
            <a href="/2020/06/09/%E6%9E%B6%E6%9E%84-Spring%20Web%E4%B8%8ESpring%20MVC/">架构-Spring Web与Spring MVC</a>
          </li>
        
          <li>
            <a href="/2020/06/09/%E6%9E%B6%E6%9E%84-Spring/">架构-Spring</a>
          </li>
        
          <li>
            <a href="/2020/06/08/%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F/">架构-Java基础</a>
          </li>
        
          <li>
            <a href="/2020/06/08/%E6%9E%B6%E6%9E%84-Java%E5%9F%BA%E7%A1%80/">架构-Java基础</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 lu<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>